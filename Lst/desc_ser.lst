C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 1   


C166 COMPILER V7.57.0, COMPILATION OF MODULE DESC_SER
OBJECT MODULE PLACED IN .\Obj\desc_ser.obj
COMPILER INVOKED BY: C:\Keil_v5\C166\BIN\C166.EXE src\bsw\desc\desc_ser.c MODV2 LARGE BROWSE INCDIR(.\src;.\src\bsw;.\sr
                    -c\driver;.\src\interaction;.\src\app\adc;.\src\app\alogrithm;.\src\app\can;.\src\app\ccp;.\src\app\diagnostic;.\src\app\
                    -mode control;.\src\app\task;.\src\app\Fun;.\src\app\rtos;.\src\bsw\can;.\src\bsw\desc;.\src\bsw\nm;.\src\app\time measur
                    -e;.\src\app\rte) MODV2 DEBUG PRINT(.\Lst\desc_ser.lst) OBJECT(.\Obj\desc_ser.obj) 

 stmt lvl     source

    1         /***********************************************************************
    2         *   Copyright (C) JWD Automotive Co., Ltd.                                             * 
    3         *       All Rights Reserved.                                                                   *
    4         *   Department : iCAS SW                                                                               *
    5         *   AUTHOR         :                                                                                               *
    6         ************************************************************************
    7         * Object        : 
    8         * Module        : DescService.c
    9         * Instance      : 
   10         * Description   : DTC service
   11         *-----------------------------------------------------------------------
   12         * Version: v0.1
   13         * Date   : Dec 7,2019 
   14         * Author : Gao zehngzhong
   15         ***********************************************************************/
   16         /*-History--------------------------------------------------------------
   17         * Version    Date           Name            Changes and comments
   18         ------------------------------------------------------------------------
   19         * 0.1        Dec 7,2019     Gao Zhengzhong  Initial version
   20         *=====================================================================*/
   21         
   22         #include <stdlib.h>
   23         #include <string.h>
   24         
   25         #include "desc.h"
   26         #include "desc_ser.h"
   27         #include "desc_mgr.h"
   28         #include "adc_sample.h"
   29         #include "eepRom.h"
   30         #include "can_com.h"
   31         #include "rte.h"
   32         #include "wireControl_Cfg.h"
   33         #include "booster_Cfg.h"
   34         
   35         
   36         #define DESC_SERVICE_GLOBALS
   37         
   38         DESC_MORE_FRAMES descMoreFramesFlag = {FALSE};
   39         
   40         
   41         /**** Definition of variables ****/
   42         INT8U descReqData[64] = {0u};
   43         INT8U descResData[256] = {0u};
   44         
   45         INT8U descResSnapshotData[46] = {0u};
   46         INT8U descResExtendedData[8] = {0u};
   47         
   48         BOOLEAN descNmFrameRxEnable = TRUE;
   49         BOOLEAN descNmFrameTxEnable = TRUE;
   50         BOOLEAN descApplFrameRxEnable = TRUE;
   51         BOOLEAN descApplFrameTxEnable = TRUE;
   52         
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 2   

   53         static BOOLEAN ser11_reset = FALSE;
   54         
   55         DescMsgContext descMsgContext = {0u};
   56         DescDataIdentifier descDataIdentifier = {0u};
   57         
   58         DESC_SERVICE_STAT INT32U descSecurityRandSeedLevel1 = 0u;
   59         DESC_SERVICE_STAT INT32U descSecurityRandSeedLevel2 = 0u;
   60         
   61         DESC_SERVICE_STAT INT32U descSendSecurityKeyLevel1 = 0u;
   62         DESC_SERVICE_STAT INT32U descSendSecurityKeyLevel2 = 0u;
   63         
   64         DESC_SERVICE_STAT INT16U descOemProcessTesterPresentTimeoutCnt = 0u;
   65         
   66         DESC_SERVICE_STAT BOOLEAN descOemProcessTesterPresentFlag = FALSE;
   67         DESC_SERVICE_STAT BOOLEAN descSecurityAccessRequestSeedLevelFlag_1 = FALSE;
   68         DESC_SERVICE_STAT BOOLEAN descSecurityAccessRequestSeedLevelFlag_2 = FALSE;
   69         
   70         /* $22 F187:Vehicle Manufacturer Spare Part Number Data Identifier */ 
   71         const INT8U VehicleManufacturerSparePartNumberDataIdentifier[10] = "XAA1234567";
   72         
   73         /* $22 F18A:System Supplier Identifier Data Identifier */
   74         const INT8U SystemSupplierIdentifierDataIdentifier[10] = "0000000000";
   75         
   76         /* $22 F18C:ECU Serial Number Data Identifier */
   77         const INT8U SystemSerialNumberDataIdentifier[16] = "XXXXXXXXXXXXXXXX";
   78         
   79         /* $22 F190:VIN Data Identifier */
   80         const INT8U OEM_VIN_DataIdentifier[17] = "ABCDEFG0123456789";
   81         
   82         /* $22 F193:System Supplier ECU Hardware Version Number Data Identifier */
   83         const INT8U SystemHardwareVersionDataIdentifier[4] = "HW05";
   84         
   85         /* $22 F195:System Supplier ECU Software Version Number Data Identifier */
   86         const INT8U SystemSoftwareVersionDataIdentifier[16] = "MuYuan201225V1.3";
   87         
   88         /* $22 F197:System Name Data Identifier */
   89         const INT8U SystemNameDataIdentifier[13] = "iCAS-BRAKE4.1";
   90         
   91         /* $27 01:Security Access Seed Level 1 */
   92         const INT8U SecurityAccessSeedLevel_1[4] = {0x08, 0x27, 0x11, 0xF0};
   93         
   94         /* $27 02:Security Access Seed Level 1 */
   95         const INT8U SecurityAccessKeyLevel_1[4] = {0xF0, 0x11, 0x27, 0x08};
   96         
   97         /* $27 09:Security Access Seed Level 1 */
   98         const INT8U SecurityAccessSeedLevel_2[4] = {0x08, 0x27, 0x11, 0xF0};
   99         
  100         /* $27 0A:Security Access Seed Level 1 */
  101         const INT8U SecurityAccessKeyLevel_2[4] = {0xF0, 0x11, 0x27, 0x08};
  102         
  103         /* $27 level 1 security alogrithem mask */
  104         const INT32U SecurityAccessMaskLevel_1 = 0x21156136;
  105         
  106         /* $27 level 2 security alogrithem mask */
  107         const INT32U SecurityAccessMaskLevel_2 = 0x21156138;
  108         
  109         
  110         /**** Declaration of functions ****/
  111         DESC_SERVICE_STAT INT32U seedToKey(INT32U seed, INT32U mask);
  112         
  113         /* Table of service (instance) relevant information. */
  114         /* $11:ECU Reset */
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 3   

  115         DESC_SERVICE_STAT void ApplDescEcuHardwareResetHard(DescMsgContext* pMsgContext);
  116         DESC_SERVICE_STAT void ApplDescEcuResetKeyOffOn(DescMsgContext* pMsgContext);
  117         DESC_SERVICE_STAT void ApplDescEcuSoftwareResetHard(DescMsgContext* pMsgContext);
  118         
  119         /* $14:Fault Memory */
  120         DESC_SERVICE_STAT void ApplDescClearDiagInfo(DescMsgContext* pMsgContext);
  121         
  122         /* $19:Fault Memory*/
  123         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportNumberOfDtcByStatusMask(DescMsgContext* pMsgContext);
  124         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportDtcByStatusMask(DescMsgContext* pMsgContext);
  125         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportDtcSnapshotRecordByDtcNumber(DescMsgContext* pMsgContext)
             -;
  126         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportDtcExtendedDataRecordByDtcNumber(DescMsgContext* pMsgCont
             -ext);
  127         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportSupportedDtc(DescMsgContext* pMsgContext);
  128         
  129         /* $22:Read By Data Identifier */
  130         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_OEM_SparePartNumber(DescMsgContext* pMsgContext);
  131         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_SupplierInformation(DescMsgContext* pMsgContext);
  132         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_ECU_SerialNumber(DescMsgContext* pMsgContext);
  133         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_OEM_VIN(DescMsgContext* pMsgContext);       
  134         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_ECU_HardwareVersionNumber(DescMsgContext* pMsgContext)
             -;
  135         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_ECU_SoftwareVersionNumber(DescMsgContext* pMsgContext)
             -;
  136         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_SystemNameDataNumber(DescMsgContext* pMsgContext);
  137         DESC_SERVICE_STAT void ApplDescSimulateAdcData(DescMsgContext* pMsgContext);
  138         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_EepromData(DescMsgContext* pMsgContext);
  139         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_Pedal_Cylinder_Data(DescMsgContext* pMsgContext);
  140         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_LongTimeBrake_Times(DescMsgContext* pMsgContext);
  141         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data1(DescMsgContext* pMsgContext);
  142         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data2(DescMsgContext* pMsgContext);
  143         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data3(DescMsgContext* pMsgContext);
  144         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data4(DescMsgContext* pMsgContext);
  145         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data5(DescMsgContext* pMsgContext);
  146         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data6(DescMsgContext* pMsgContext);
  147         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data7(DescMsgContext* pMsgContext);
  148         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data8(DescMsgContext* pMsgContext);
  149         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data9(DescMsgContext* pMsgContext);
  150         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data10(DescMsgContext* pMsgContext);
  151         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data11(DescMsgContext* pMsgContext);
  152         
  153         /* $23:Read Memory By Address */
  154         DESC_SERVICE_STAT void ApplDescReadMemoryByAddress(DescMsgContext* pMsgContext);
  155         
  156         /* $27:Security Access */
  157         DESC_SERVICE_STAT void ApplDescOemGetLevel_1_RequestSeed(DescMsgContext* pMsgContext);
  158         DESC_SERVICE_STAT void ApplDescOemSendLevel_1_SendKey(DescMsgContext* pMsgContext);
  159         DESC_SERVICE_STAT void ApplDescOemGetLevel_2_RequestSeed(DescMsgContext* pMsgContext);
  160         DESC_SERVICE_STAT void ApplDescOemSendLevel_2_SendKey(DescMsgContext* pMsgContext);
  161         
  162         /* $28:Communication Control  */
  163         DESC_SERVICE_STAT void ApplDescOemCommCtrlEnableRxEnableTx(DescMsgContext* pMsgContext);
  164         DESC_SERVICE_STAT void ApplDescOemCommCtrlEnableRxDisableTx(DescMsgContext* pMsgContext);
  165         DESC_SERVICE_STAT void ApplDescOemCommCtrlDisableRxEnableTx(DescMsgContext* pMsgContext);
  166         DESC_SERVICE_STAT void ApplDescOemCommCtrlDisableRxDisableTx(DescMsgContext* pMsgContext);
  167         
  168         /* $2A:Read Data By Periodic Indentifier */
  169         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_SendAtSlowRate(DescMsgContext* pMsgContext);
  170         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_SendAtMediumRate(DescMsgContext* pMsgContext);
  171         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_SendAtFastRate(DescMsgContext* pMsgContext);
  172         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_StopSending(DescMsgContext* pMsgContext);
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 4   

  173         
  174         /* $2C:Dynamically Define Data Indentifier */
  175         DESC_SERVICE_STAT void ApplDescDynamicallyDefineDataIdentifier_DefineByIdentifier(DescMsgContext* pMsgCont
             -ext);
  176         DESC_SERVICE_STAT void ApplDescDynamicallyDefineDataIdentifier_ClearDynamicallyDefineDataIdentifier(DescMs
             -gContext* pMsgContext);
  177         
  178         /* $2E:Write By Data Identifier */
  179         DESC_SERVICE_STAT void ApplDescWriteByDataIdentifier_ECU_SerialNumber(DescMsgContext* pMsgContext);
  180         DESC_SERVICE_STAT void ApplDescWriteByDataIdentifierOEM_VIN(DescMsgContext* pMsgContext);
  181         DESC_SERVICE_STAT void ApplDescWriteEepromDataById_6668(DescMsgContext* pMsgContext);
  182         DESC_SERVICE_STAT void ApplDescWritePedalCylinderDataById_2201(DescMsgContext* pMsgContext);
  183         DESC_SERVICE_STAT void ApplDescWriteLongTimeBrakeTimesDataById_2202(DescMsgContext* pMsgContext);
  184         DESC_SERVICE_STAT void ApplDescWritePvTestFlagById_2E02(DescMsgContext* pMsgContext);
  185         DESC_SERVICE_STAT void ApplDescWriteClearCalibrationDataById_2203(DescMsgContext* pMsgContext);
  186         
  187         
  188         /* $2F:Input Output Control By Identifier */
  189         
  190         /* $31:Service Routine Control*/
  191         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_CheckProgrammingIntegrity(DescMsgContext* pMsgCo
             -ntext);
  192         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_CheckProgrammingPreCondition(DescMsgContext* pMs
             -gContext);
  193         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_EraseMemory(DescMsgContext* pMsgContext);
  194         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_CheckProgrammingDependency(DescMsgContext* pMsgC
             -ontext);
  195         
  196         /* $34:Request Download */ 
  197         DESC_SERVICE_STAT void ApplDescRequestDownload(DescMsgContext* pMsgContext);
  198         
  199         /* $36:Transfer Data */ 
  200         DESC_SERVICE_STAT void ApplDescTransferData(DescMsgContext* pMsgContext);
  201         
  202         /* $37:Request Transfer Exit */ 
  203         DESC_SERVICE_STAT void ApplDescRequestTransferExit(DescMsgContext* pMsgContext);        
  204         
  205         /* $3D:Write Memory By Address */ 
  206         DESC_SERVICE_STAT void ApplDescWriteMemoryByAddress(DescMsgContext* pMsgContext);
  207         
  208         /* $3E:Tester Present */ 
  209         DESC_SERVICE_STAT void ApplDescOemProcessTesterPresent(DescMsgContext* pMsgContext);    
  210         
  211         /* $85:Control DTC Setting */
  212         DESC_SERVICE_STAT void ApplDescControlDtcSettingEnable(DescMsgContext* pMsgContext);
  213         DESC_SERVICE_STAT void ApplDescControlDtcSettingDisable(DescMsgContext* pMsgContext);
  214         
  215         
  216         DESC_SERVICE_STAT DiagHandler CanDiagHandler[DESC_MAX_TYPE]=
  217         {
  218                 /* $10:Diagnostic Session Control. Had been handle by "CANdesc" component. */
  219             NULL,//DESC_10_01_DEFAULT_SESSION,
  220             NULL,//DESC_10_01_DEFAULT_SESSION,
  221             NULL,//DESC_10_03_EXTENDED_SESSION,
  222         
  223                 /* $11:ECU Reset */
  224             ApplDescEcuHardwareResetHard, /* $11 01 */
  225             ApplDescEcuResetKeyOffOn,     /* $11 02 */
  226             ApplDescEcuSoftwareResetHard, /* $11 03 */    
  227         
  228                 /* $14:Clear Diagnostic Information */
  229             ApplDescClearDiagInfo, 
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 5   

  230         
  231                 /* $19:Read DTC Information */
  232             ApplDescReadDtcInfo_ReportNumberOfDtcByStatusMask,          /* $19 01 */    
  233             ApplDescReadDtcInfo_ReportDtcByStatusMask,                  /* $19 02 */
  234                 ApplDescReadDtcInfo_ReportDtcSnapshotRecordByDtcNumber,     /* $19 04 */        
  235             ApplDescReadDtcInfo_ReportDtcExtendedDataRecordByDtcNumber, /* $19 06 */
  236             ApplDescReadDtcInfo_ReportSupportedDtc,                         /* $19 0A */
  237         
  238             /* $22:Read By Data Identifier */
  239                 ApplDescReadByDataIdentifier_OEM_SparePartNumber,       /* $22 F187 */  
  240                 ApplDescReadByDataIdentifier_SupplierInformation,       /* $22 F18A */
  241                 ApplDescReadByDataIdentifier_ECU_SerialNumber,          /* $22 F18C */
  242                 ApplDescReadByDataIdentifier_OEM_VIN,                   /* $22 F190 */
  243                 ApplDescReadByDataIdentifier_ECU_HardwareVersionNumber, /* $22 F193 */
  244                 ApplDescReadByDataIdentifier_ECU_SoftwareVersionNumber, /* $22 F195 */
  245                 ApplDescReadByDataIdentifier_SystemNameDataNumber,          /* $22 F197 */
  246                 ApplDescSimulateAdcData,                                                                /* $22 6666 */
  247                 ApplDescReadByDataIdentifier_EepromData,                                /* $22 6667 */
  248                 ApplDescReadDataByIdentifier_Pedal_Cylinder_Data,               /* $22 2201 */
  249                 ApplDescReadDataByIdentifier_LongTimeBrake_Times,               /* $22 2202 */
  250                 ApplDescReadDataByIdentifier_SettingParameter_Data1,    /* $22 DEF0 */
  251                 ApplDescReadDataByIdentifier_SettingParameter_Data2,    /* $22 DEF1 */
  252                 ApplDescReadDataByIdentifier_SettingParameter_Data3,    /* $22 DEF2 */
  253                 ApplDescReadDataByIdentifier_SettingParameter_Data4,    /* $22 DEF3 */
  254                 ApplDescReadDataByIdentifier_SettingParameter_Data5,    /* $22 DEF4 */
  255                 ApplDescReadDataByIdentifier_SettingParameter_Data6,    /* $22 DEF5 */
  256                 ApplDescReadDataByIdentifier_SettingParameter_Data7,    /* $22 DEF6 */
  257                 ApplDescReadDataByIdentifier_SettingParameter_Data8,    /* $22 DEF7 */
  258                 ApplDescReadDataByIdentifier_SettingParameter_Data9,    /* $22 DEF8 */
  259                 ApplDescReadDataByIdentifier_SettingParameter_Data10,   /* $22 DEF9 */
  260                 ApplDescReadDataByIdentifier_SettingParameter_Data11,   /* $22 DEFA */
  261         
  262                 /* $23:Read Memory By Address */
  263                 ApplDescReadMemoryByAddress, /* $23 24 */
  264         
  265                 /* $27:Security Access */
  266                 ApplDescOemGetLevel_1_RequestSeed, /* $27 01 */
  267                 ApplDescOemSendLevel_1_SendKey,    /* $27 02 */
  268                 ApplDescOemGetLevel_2_RequestSeed, /* $27 09 */
  269                 ApplDescOemSendLevel_2_SendKey,    /* $27 0A */
  270         
  271                 /* $28:Communication Control */
  272                 ApplDescOemCommCtrlEnableRxEnableTx,   /* $28 00 */
  273                 ApplDescOemCommCtrlEnableRxDisableTx,  /* $28 01 */
  274                 ApplDescOemCommCtrlDisableRxEnableTx,  /* $28 02 */
  275                 ApplDescOemCommCtrlDisableRxDisableTx, /* $28 03 */ 
  276         
  277                 /* $2A:Read Data By Periodic Indentifier */        
  278                 ApplDesReadDataByPeriodicIndentifier_SendAtSlowRate,   /* $2A 01 */
  279                 ApplDesReadDataByPeriodicIndentifier_SendAtMediumRate, /* $2A 02 */
  280                 ApplDesReadDataByPeriodicIndentifier_SendAtFastRate,   /* $2A 03 */
  281                 ApplDesReadDataByPeriodicIndentifier_StopSending,      /* $2A 04 */
  282         
  283                 /* $2C:Dynamically Define Data Indentifier */
  284                 ApplDescDynamicallyDefineDataIdentifier_DefineByIdentifier,                   /* $2C 01 */
  285                 ApplDescDynamicallyDefineDataIdentifier_ClearDynamicallyDefineDataIdentifier, /* $2C 03 */
  286                 
  287                 /* $2E:Write By Data Identifier */
  288                 ApplDescWriteByDataIdentifier_ECU_SerialNumber, /* $2E F18C */
  289                 ApplDescWriteByDataIdentifierOEM_VIN, /* $2E F190 */
  290                 ApplDescWriteEepromDataById_6668,         /* $2E 6668 */
  291                 ApplDescWritePedalCylinderDataById_2201,/* $2E 2201 */
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 6   

  292                 ApplDescWriteLongTimeBrakeTimesDataById_2202,/* $2E 2202 */
  293                 ApplDescWritePvTestFlagById_2E02,               /* $2E 2E02 */
  294                 ApplDescWriteClearCalibrationDataById_2203,             /* $2E 2203 */
  295         
  296                 /* $2F:Input Output Control By Identifier */    
  297                 
  298             /* $31:Routine Control */   
  299             ApplDescRoutineControlByIdentifier_CheckProgrammingIntegrity,    /* $31 01 F0 01 */ 
  300             ApplDescRoutineControlByIdentifier_CheckProgrammingPreCondition, /* $31 01 FF 02 */    
  301             ApplDescRoutineControlByIdentifier_EraseMemory,                  /* $31 01 FF 00 */
  302             ApplDescRoutineControlByIdentifier_CheckProgrammingDependency,       /* $31 01 FF 01 */
  303             
  304                 /* $34:Request Download */ 
  305             ApplDescRequestDownload,    
  306         
  307                 /* $36:Transfer Data */ 
  308             ApplDescTransferData,
  309         
  310                 /* $37:Request Transfer Exit */ 
  311             ApplDescRequestTransferExit,
  312         
  313                 /* $3D:Write Memory By Address */ 
  314                 ApplDescWriteMemoryByAddress,   
  315         
  316                 /* $3E:Tester Present */ 
  317             ApplDescOemProcessTesterPresent,            
  318         
  319                 /* $85:Control DTC Setting */
  320                 ApplDescControlDtcSettingEnable,  /* $85 01 */
  321                 ApplDescControlDtcSettingDisable, /* $85 02 */
  322         };
  323         
  324         
  325         /*****************************************************************************************
  326         *  Name        : CanDesc_TaskEntry
  327         *  Description : none       
  328         *  Parameter   : none
  329         *  Returns     : none 
  330         *****************************************************************************************/
  331         DESC_STAT INT8U uFCTimeoutCnt = 0;
  332         void CanDesc_TaskEntry(void)
  333         {
  334  1              static INT8U ResetCnt = 0;
  335  1      
  336  1              descMsgContext.reqData = descReqData;
  337  1              descMsgContext.resData = descResData;
  338  1      
  339  1              if(ser11_reset)
  340  1              {
  341  2                      ResetCnt++;
  342  2                      if(ResetCnt >= 10)
  343  2                      {
  344  3                              ResetCnt = 0;
  345  3                              DESC_vSWRST();
  346  3                      }
  347  2              }
  348  1      
  349  1              if((descMoreFramesFlag.bFFSended == TRUE)&&(descMoreFramesFlag.bFCReceived == FALSE))
  350  1              {
  351  2                      if(descMsgContext.reqDataLen == 0x30)
  352  2                      {
  353  3                              descMoreFramesFlag.bFCReceived = TRUE;
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 7   

  354  3                              descMoreFramesFlag.bFFSended = FALSE;
  355  3                              g_descReqMsgRxFlag = FALSE;
  356  3                              uFCTimeoutCnt = 0u;
  357  3                      }
  358  2                      else
  359  2                      {
  360  3                              uFCTimeoutCnt++;
  361  3                      }
  362  2                      if(uFCTimeoutCnt >= 10u)  //50ms timeout
  363  2                      {
  364  3                              descMoreFramesFlag.bFFSended = FALSE;
  365  3                              descMoreFramesFlag.bFCReceived = FALSE;
  366  3                              uFCTimeoutCnt = 0u;
  367  3                              g_descReqMsgRxFlag = FALSE;
  368  3                              DescSetNegResponse(&descMsgContext, kDescNrcNoResponseFromSubnetComponent);
  369  3                      }
  370  2                      return;
  371  2              }
  372  1              
  373  1              if (TRUE == g_descReqMsgRxFlag)
  374  1              {
  375  2                      g_descReqMsgRxFlag = FALSE;
  376  2                      DescServiceClassifier(&descMsgContext); 
  377  2      
  378  2                      /* Check OBD tester present status, if long time not receive
  379  2                       * $3E service, meaning the OBD at present timeout, ECU should
  380  2                       * switch session mode to default session state. */
  381  2                      descOemProcessTesterPresentTimeoutCnt++;
  382  2                      if (descOemProcessTesterPresentTimeoutCnt >= 65535u)
  383  2                      {
  384  3                              descOemProcessTesterPresentFlag = FALSE;
  385  3                              DescSetStateSession(kDescStateSessionDefault);
  386  3                      }
  387  2              }
  388  1              
  389  1              return;
  390  1      }
  391         
  392         /*  ********************************************************************************
  393          * Function name:ApplDescEcuHardwareResetHard (Service request header:$11 $1 )
  394          * Description: not available 
  395          * Returns:  nothing
  396          * Parameter(s):
  397          *   - pMsgContext->reqData:
  398          *       - Points to the first service request data byte.
  399          *       - Access type: read
  400          *   - pMsgContext->resData:
  401          *       - Points to the first writeable byte for the service response data.
  402          *       - Access type: read/write
  403          *   - pMsgContext->reqDataLen:
  404          *       - Contains the count of the service request data bytes (Sid is excluded).
  405          *       - Access type: read
  406          *   - pMsgContext->resDataLen:
  407          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  408          *       - Access type: read/write
  409          *   - pMsgContext->msgAddInfo.reqType:
  410          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  411          *       - Access type: read
  412          *   - pMsgContext->msgAddInfo.resOnReq:
  413          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  414          *       - Access type: read/write
  415          *   - pMsgContext->msgAddInfo.suppPosRes:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 8   

  416          *       - UDS only!If set no positive response will be sent on this request.
  417          *       - Access type: read
  418          * Particularitie(s) and limitation(s):
  419          *   - The function "DescProcessingDone" must be called from now on (within this
  420          * main-handler or later).
  421          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  422          * but before calling "DescProcessingDone".
  423          ********************************************************************************  */
  424         DESC_SERVICE_STAT void ApplDescEcuHardwareResetHard(DescMsgContext* pMsgContext)
  425         {
  426  1      #if (kDescEnableService11_HardwareReset == 1)
  427  1      
  428  1              if (0x02 == pMsgContext->reqDataLen)
  429  1              {
  430  2                      if (0u == VCU_VehicleSpeed)
  431  2                      {
  432  3      #if 0
                                      pMsgContext->resDataLen = 0x02;
                                      DescSetPosResponse(pMsgContext);
              
                                      /* Hardware Reset */
                          // TODO:Hardware reset
              #else
  439  3                              DescSetNegResponse(pMsgContext, kDescNrcSubfunctionNotSupported);
  440  3      #endif
  441  3                      }
  442  2                      else
  443  2                      {
  444  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
  445  3                      }               
  446  2              }
  447  1              else
  448  1              {
  449  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
  450  2              }
  451  1      #else
                      DescProcessingDone();
              #endif
  454  1      }
  455         
  456         /*  ********************************************************************************
  457          * Function name:ApplDescEcuResetKeyOffOn (Service request header:$11 $2 )
  458          * Description: not available 
  459          * Returns:  nothing
  460          * Parameter(s):
  461          *   - pMsgContext->reqData:
  462          *       - Points to the first service request data byte.
  463          *       - Access type: read
  464          *   - pMsgContext->resData:
  465          *       - Points to the first writeable byte for the service response data.
  466          *       - Access type: read/write
  467          *   - pMsgContext->reqDataLen:
  468          *       - Contains the count of the service request data bytes (Sid is excluded).
  469          *       - Access type: read
  470          *   - pMsgContext->resDataLen:
  471          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  472          *       - Access type: read/write
  473          *   - pMsgContext->msgAddInfo.reqType:
  474          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  475          *       - Access type: read
  476          *   - pMsgContext->msgAddInfo.resOnReq:
  477          *       - Indicates if there will be response. Allowed only to write only 0 !!!
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 9   

  478          *       - Access type: read/write
  479          *   - pMsgContext->msgAddInfo.suppPosRes:
  480          *       - UDS only!If set no positive response will be sent on this request.
  481          *       - Access type: read
  482          * Particularitie(s) and limitation(s):
  483          *   - The function "DescProcessingDone" must be called from now on (within this
  484          * main-handler or later).
  485          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  486          * but before calling "DescProcessingDone".
  487          ********************************************************************************  */
  488         DESC_SERVICE_STAT void ApplDescEcuResetKeyOffOn(DescMsgContext* pMsgContext)
  489         {
  490  1      #if (kDescEnableService11_KeyOffOnReset == 1)
  491  1      
  492  1              if (0x02 == pMsgContext->reqDataLen)
  493  1              {
  494  2                      if (0u == VCU_VehicleSpeed)
  495  2                      {
  496  3      #if 0   
                                      pMsgContext->resDataLen = 0x02;
                                      DescSetPosResponse(pMsgContext);
                                      
                                      // TODO:Key Off On Reset                
              #else
  502  3                              DescSetNegResponse(pMsgContext, kDescNrcSubfunctionNotSupported);
  503  3      #endif                  
  504  3                      }
  505  2                      else
  506  2                      {
  507  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
  508  3                      }               
  509  2              }
  510  1              else
  511  1              {
  512  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
  513  2              }
  514  1      #else
                      DescProcessingDone();
              #endif
  517  1      }
  518         
  519         /*  ********************************************************************************
  520          * Function name:ApplDescEcuSoftwareResetHard (Service request header:$11 $3 )
  521          * Description: not available 
  522          * Returns:  nothing
  523          * Parameter(s):
  524          *   - pMsgContext->reqData:
  525          *       - Points to the first service request data byte.
  526          *       - Access type: read
  527          *   - pMsgContext->resData:
  528          *       - Points to the first writeable byte for the service response data.
  529          *       - Access type: read/write
  530          *   - pMsgContext->reqDataLen:
  531          *       - Contains the count of the service request data bytes (Sid is excluded).
  532          *       - Access type: read
  533          *   - pMsgContext->resDataLen:
  534          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  535          *       - Access type: read/write
  536          *   - pMsgContext->msgAddInfo.reqType:
  537          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  538          *       - Access type: read
  539          *   - pMsgContext->msgAddInfo.resOnReq:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 10  

  540          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  541          *       - Access type: read/write
  542          *   - pMsgContext->msgAddInfo.suppPosRes:
  543          *       - UDS only!If set no positive response will be sent on this request.
  544          *       - Access type: read
  545          * Particularitie(s) and limitation(s):
  546          *   - The function "DescProcessingDone" must be called from now on (within this
  547          * main-handler or later).
  548          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  549          * but before calling "DescProcessingDone".
  550          ********************************************************************************  */
  551         DESC_SERVICE_STAT void ApplDescEcuSoftwareResetHard(DescMsgContext* pMsgContext)
  552         {
  553  1              static INT16U temp = 0u;
  554  1              
  555  1      #if (kDescEnableService11_SoftwareReset == 1)
  556  1      
  557  1              if (0x02 == pMsgContext->reqDataLen)
  558  1              {
  559  2                      if (0u == VCU_VehicleSpeed)
  560  2                      {
  561  3                              pMsgContext->resDataLen = 0x02;
  562  3                              DescSetPosResponse(pMsgContext);
  563  3      
  564  3                              //DESC_vSWRST();
  565  3                              ser11_reset = TRUE;
  566  3                      }
  567  2                      else
  568  2                      {
  569  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
  570  3                      }               
  571  2              }
  572  1              else
  573  1              {
  574  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
  575  2              }
  576  1      #else
                      DescProcessingDone();
              #endif
  579  1      }
  580         
  581         
  582         /*  ********************************************************************************
  583          * Function name:ApplDescClearDiagInfo (Service request header:$14 )
  584         * Description: not available 
  585          * Returns:  nothing
  586          * Parameter(s):
  587          *   - pMsgContext->reqData:
  588          *       - Points to the first service request byte after the Sid.
  589          *       - Access type: read
  590          *   - pMsgContext->resData:
  591          *       - Points to the first writeable byte for the service response after the Sid.
  592          *       - Access type: read/write
  593          *   - pMsgContext->reqDataLen:
  594          *       - Contains the service request length, excluding Sid byte only.
  595          *       - Access type: read
  596          *   - pMsgContext->resDataLen:
  597          *       - Must be initialized with the total service response length, excluding the Sid only.
  598          *       - Access type: read/write
  599          *   - pMsgContext->msgAddInfo.reqType:
  600          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  601          *       - Access type: read
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 11  

  602          *   - pMsgContext->msgAddInfo.resOnReq:
  603          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  604          *       - Access type: read/write
  605          *   - pMsgContext->msgAddInfo.suppPosRes:
  606          *       - UDS only!If set no positive response will be sent on this request.
  607          *       - Access type: read
  608          * Particularitie(s) and limitation(s):
  609          *   - The function "DescProcessingDone" must be called from now on (within this
  610          * main-handler or later).
  611          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  612          * but before calling "DescProcessingDone".
  613          ********************************************************************************  */
  614         DESC_SERVICE_STAT void ApplDescClearDiagInfo(DescMsgContext* pMsgContext)
  615         {
  616  1              INT32U dtc_group_type = 0;      
  617  1      
  618  1          dtc_group_type = (((INT32U)pMsgContext->reqData[1]) << 16u) & 0x00FF0000; /* High byte */
  619  1          dtc_group_type |= (((INT32U)pMsgContext->reqData[2]) << 8u) & 0x0000FF00; /* Middle byte */
  620  1          dtc_group_type |= (((INT32U)pMsgContext->reqData[3])) & 0x000000FF;       /* low byte */
  621  1      
  622  1              if (4u == pMsgContext->reqDataLen)
  623  1              {
  624  2                      if (DTC_GRP_ALL == dtc_group_type)
  625  2                      {
  626  3                              if (0u == EepRom_Check())
  627  3                              {
  628  4                                      /* Clear Diagnostic Information */
  629  4                                      DescMgr_DelaySetSig(DESC_DELAY_SIG_1);
  630  4                                      DescMgr_Sv14ClearStart();
  631  4                                      //EarsePageEeprom_v_g();
  632  4      
  633  4                                      pMsgContext->resDataLen = 1u;
  634  4                                      pMsgContext->reqData[1] = 0x00;
  635  4                                      pMsgContext->reqData[2] = 0x00;
  636  4      
  637  4                                      DescSetPosResponse(pMsgContext);                                        
  638  4                              }
  639  3                              else
  640  3                              {
  641  4                                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                  
  642  4                              }
  643  3                      }
  644  2                      else
  645  2                      {
  646  3                      DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                     
  647  3                      }
  648  2              }
  649  1              else
  650  1              {
  651  2              DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
  652  2              }
  653  1      }
  654         
  655         /*  ********************************************************************************
  656          * Function name:ApplDescReadDtcInfo_ReportNumberOfDtcByStatusMask (Service request header:$19 $1 )
  657          * Description: not available 
  658          * Returns:  nothing
  659          * Parameter(s):
  660          *   - pMsgContext->reqData:
  661          *       - Points to the first service request data byte.
  662          *       - Access type: read
  663          *   - pMsgContext->resData:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 12  

  664          *       - Points to the first writeable byte for the service response data.
  665          *       - Access type: read/write
  666          *   - pMsgContext->reqDataLen:
  667          *       - Contains the count of the service request data bytes (Sid is excluded).
  668          *       - Access type: read
  669          *   - pMsgContext->resDataLen:
  670          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  671          *       - Access type: read/write
  672          *   - pMsgContext->msgAddInfo.reqType:
  673          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  674          *       - Access type: read
  675          *   - pMsgContext->msgAddInfo.resOnReq:
  676          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  677          *       - Access type: read/write
  678          *   - pMsgContext->msgAddInfo.suppPosRes:
  679          *       - UDS only!If set no positive response will be sent on this request.
  680          *       - Access type: read
  681          * Particularitie(s) and limitation(s):
  682          *   - The function "DescProcessingDone" must be called from now on (within this
  683          * main-handler or later).
  684          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  685          * but before calling "DescProcessingDone".
  686          ********************************************************************************  */
  687         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportNumberOfDtcByStatusMask(DescMsgContext* pMsgContext)
  688         {
  689  1              INT16U dtc_num = 0; 
  690  1              
  691  1              if (3u == pMsgContext->reqDataLen)
  692  1              {
  693  2                      if (0 != (pMsgContext->reqData[2] & DTC_STATUS_AVAILABILITY_MASK))
  694  2                      {
  695  3                              dtc_num = DescMgr_CanDiagGetDtcCount(pMsgContext->reqData[2]);          /*get stc number through dtc status*
             -/
  696  3      
  697  3                              pMsgContext->resDataLen = 6u;
  698  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
  699  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
  700  3                              pMsgContext->resData[2] = DTC_STATUS_AVAILABILITY_MASK;
  701  3                          pMsgContext->resData[3] = DTC_FORMAT_INDENTIFIER_1;
  702  3                          pMsgContext->resData[4] = (INT8U)(dtc_num >> 8u);/*High byte*/
  703  3                          pMsgContext->resData[5] = (INT8U)(dtc_num & 0xff);/*Low byte*/
  704  3      
  705  3                              CanTx_descResMsgSendEnable();                           
  706  3                      }
  707  2                      else
  708  2                      {
  709  3                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                             
  710  3                      }       
  711  2              }
  712  1              else
  713  1              {
  714  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
  715  2              }
  716  1      }
  717         
  718         /*  ********************************************************************************
  719          * Function name:ApplDescReadDtcInfo_ReportDtcByStatusMask (Service request header:$19 $2 )
  720          * Description: not available 
  721          * Returns:  nothing
  722          * Parameter(s):
  723          *   - pMsgContext->reqData:
  724          *       - Points to the first service request data byte.
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 13  

  725          *       - Access type: read
  726          *   - pMsgContext->resData:
  727          *       - Points to the first writeable byte for the service response data.
  728          *       - Access type: read/write
  729          *   - pMsgContext->reqDataLen:
  730          *       - Contains the count of the service request data bytes (Sid is excluded).
  731          *       - Access type: read
  732          *   - pMsgContext->resDataLen:
  733          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  734          *       - Access type: read/write
  735          *   - pMsgContext->msgAddInfo.reqType:
  736          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  737          *       - Access type: read
  738          *   - pMsgContext->msgAddInfo.resOnReq:
  739          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  740          *       - Access type: read/write
  741          *   - pMsgContext->msgAddInfo.suppPosRes:
  742          *       - UDS only!If set no positive response will be sent on this request.
  743          *       - Access type: read
  744          * Particularitie(s) and limitation(s):
  745          *   - The function "DescProcessingDone" must be called from now on (within this
  746          * main-handler or later).
  747          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  748          * but before calling "DescProcessingDone".
  749          ********************************************************************************  */
  750         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportDtcByStatusMask(DescMsgContext* pMsgContext)
  751         {
  752  1              INT8U i;
  753  1              INT16U dtc_num = 0u; 
  754  1      
  755  1              DESC_SERVICE_STAT INT8U descResDtcByStatusMask[DTC_CODE_MAX_NUM*4] = {0u};
  756  1      
  757  1              if (3u == pMsgContext->reqDataLen)
  758  1              {
  759  2                      if (0 != (pMsgContext->reqData[2] & DTC_STATUS_AVAILABILITY_MASK))
  760  2                      {
  761  3                              dtc_num = DescMgr_CanDiagGetDtcStatusByStatusMask(descResDtcByStatusMask, pMsgContext->reqData[2]);
  762  3                              pMsgContext->resDataLen = (INT8U)(3u + dtc_num * 4u);
  763  3      
  764  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
  765  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
  766  3                              pMsgContext->resData[2] = DTC_STATUS_AVAILABILITY_MASK;
  767  3      
  768  3                              for (i = 0u; i < (4 * dtc_num); i++)
  769  3                              {
  770  4                                      pMsgContext->resData[i+3] = descResDtcByStatusMask[i];
  771  4                              }
  772  3      
  773  3                              CanTx_descResMsgSendEnable();
  774  3                      }
  775  2                      else
  776  2                      {
  777  3                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                             
  778  3                      }
  779  2              }
  780  1              else
  781  1              {
  782  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
  783  2              }  
  784  1      }
  785         
  786         /*****************************************************************************************
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 14  

  787         *  Name        : ApplDesc_CompareDtcNumber
  788         *  Description : none    
  789         *  Parameter   : pMsgContext
  790         *  Returns     : none 
  791         *****************************************************************************************/
  792         DESC_SERVICE_STAT BOOLEAN ApplDesc_CompareDtcNumber(DescMsgContext* pMsgContext)
  793         {
  794  1              INT8U record_count;
  795  1          BOOLEAN NRC_occured = TRUE;
  796  1      
  797  1              for (record_count=0u; record_count<DTC_CODE_MAX_NUM; record_count++)
  798  1          {
  799  2              if ((dtc_code_data[record_count].dtc_bytes.dtc_high_byte == pMsgContext->reqData[2]) 
  800  2                   && (dtc_code_data[record_count].dtc_bytes.dtc_middle_byte == pMsgContext->reqData[3])
  801  2                   && (dtc_code_data[record_count].dtc_bytes.dtc_low_byte == pMsgContext->reqData[4]))
  802  2              {
  803  3                  NRC_occured = FALSE;
  804  3              }
  805  2                      
  806  2              if(!NRC_occured)
  807  2              {
  808  3                  return TRUE;
  809  3              }
  810  2          }
  811  1              
  812  1          return FALSE;  
  813  1      }
  814         
  815         /*  ********************************************************************************
  816          * Function name:ApplDescReadDtcInfo_ReportDtcSnapshotRecordByDtcNumber (Service request header:$19 $4 )
  817          * Description: not available 
  818          * Returns:  nothing
  819          * Parameter(s):
  820          *   - pMsgContext->reqData:
  821          *       - Points to the first service request data byte.
  822          *       - Access type: read
  823          *   - pMsgContext->resData:
  824          *       - Points to the first writeable byte for the service response data.
  825          *       - Access type: read/write
  826          *   - pMsgContext->reqDataLen:
  827          *       - Contains the count of the service request data bytes (Sid is excluded).
  828          *       - Access type: read
  829          *   - pMsgContext->resDataLen:
  830          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  831          *       - Access type: read/write
  832          *   - pMsgContext->msgAddInfo.reqType:
  833          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  834          *       - Access type: read
  835          *   - pMsgContext->msgAddInfo.resOnReq:
  836          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  837          *       - Access type: read/write
  838          *   - pMsgContext->msgAddInfo.suppPosRes:
  839          *       - UDS only!If set no positive response will be sent on this request.
  840          *       - Access type: read
  841          * Particularitie(s) and limitation(s):
  842          *   - The function "DescProcessingDone" must be called from now on (within this
  843          * main-handler or later).
  844          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  845          * but before calling "DescProcessingDone".
  846          ********************************************************************************  */
  847         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportDtcSnapshotRecordByDtcNumber(DescMsgContext* pMsgContext)
  848         {
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 15  

  849  1              INT8U i;
  850  1      
  851  1              if (6u == pMsgContext->reqDataLen)
  852  1              {
  853  2                      if (TRUE == ApplDesc_CompareDtcNumber(pMsgContext))
  854  2                      {
  855  3                              switch (pMsgContext->reqData[5])  
  856  3                              {
  857  4                                      case 0x01:
  858  4                                      case 0xFF:
  859  4                                              DescMgr_CanDiagGetSnapshotData(descResSnapshotData, &(pMsgContext->reqData[0]));
  860  4                                      
  861  4                                          pMsgContext->resDataLen = sizeof(descResSnapshotData) + 2u;
  862  4      
  863  4                                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
  864  4                                              pMsgContext->resData[1] = pMsgContext->reqData[1];
  865  4      
  866  4                                              for (i=0u; i<sizeof(descResSnapshotData); i++)
  867  4                                              {
  868  5                                                      pMsgContext->resData[i+2] = descResSnapshotData[i];
  869  5                                              }
  870  4                                              CanTx_descResMsgSendEnable();
  871  4              
  872  4                                              break;
  873  4                                      default:
  874  4                                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);
  875  4                                              break;
  876  4                              }               
  877  3                      }
  878  2                      else
  879  2                      {
  880  3                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                     
  881  3                      }
  882  2              }
  883  1              else
  884  1              {
  885  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
  886  2              } 
  887  1      }
  888         
  889         /*  ********************************************************************************
  890          * Function name:ApplDescReadDtcInfo_ReportDtcExtendedDataRecordByDtcNumber (Service request header:$19 $6
             - )
  891          * Description: not available 
  892          * Returns:  nothing
  893          * Parameter(s):
  894          *   - pMsgContext->reqData:
  895          *       - Points to the first service request data byte.
  896          *       - Access type: read
  897          *   - pMsgContext->resData:
  898          *       - Points to the first writeable byte for the service response data.
  899          *       - Access type: read/write
  900          *   - pMsgContext->reqDataLen:
  901          *       - Contains the count of the service request data bytes (Sid is excluded).
  902          *       - Access type: read
  903          *   - pMsgContext->resDataLen:
  904          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  905          *       - Access type: read/write
  906          *   - pMsgContext->msgAddInfo.reqType:
  907          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
  908          *       - Access type: read
  909          *   - pMsgContext->msgAddInfo.resOnReq:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 16  

  910          *       - Indicates if there will be response. Allowed only to write only 0 !!!
  911          *       - Access type: read/write
  912          *   - pMsgContext->msgAddInfo.suppPosRes:
  913          *       - UDS only!If set no positive response will be sent on this request.
  914          *       - Access type: read
  915          * Particularitie(s) and limitation(s):
  916          *   - The function "DescProcessingDone" must be called from now on (within this
  917          * main-handler or later).
  918          *   - The function "DescSetNegResponse" can be called within this main-handler or later
  919          * but before calling "DescProcessingDone".
  920          ********************************************************************************  */
  921         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportDtcExtendedDataRecordByDtcNumber(DescMsgContext* pMsgCont
             -ext)
  922         {
  923  1              INT8U i;
  924  1      
  925  1          /**
  926  1           *  pMsgContext->reqData[0]-----> DTC Number High byte
  927  1           *  pMsgContext->reqData[1]-----> DTC Number Middle byte
  928  1           *  pMsgContext->reqData[2]-----> DTC Number Low byte
  929  1           *  pMsgContext->reqData[3]-----> Request extend data type
  930  1           *  All can be config in canoe or vspy
  931  1           */
  932  1              if (TRUE == ApplDesc_CompareDtcNumber(pMsgContext))
  933  1              {
  934  2                      switch (pMsgContext->reqData[5]) 
  935  2                      {
  936  3                              case 0x01:
  937  3                              case 0x02:
  938  3                              case 0x03:
  939  3                              case 0x04:
  940  3                                      DescMgr_CanDiagGetExtendData(descResExtendedData, &(pMsgContext->reqData[0])); 
  941  3      
  942  3                                      pMsgContext->resDataLen = 8u;                           
  943  3                                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
  944  3                                      pMsgContext->resData[1] = pMsgContext->reqData[1];
  945  3      
  946  3                                      for (i = 0u; i < 6u; i++)
  947  3                                      {
  948  4                                              pMsgContext->resData[i+2] = descResExtendedData[i];
  949  4                                      }
  950  3      
  951  3                                      CanTx_descResMsgSendEnable();
  952  3                                      
  953  3                                  break;
  954  3                                      
  955  3                              case 0xFF:
  956  3                                  DescMgr_CanDiagGetExtendData(descResExtendedData, &(pMsgContext->reqData[0]));    
  957  3      
  958  3                                      pMsgContext->resDataLen = sizeof(descResExtendedData) + 2u;                             
  959  3                                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
  960  3                                      pMsgContext->resData[1] = pMsgContext->reqData[1];
  961  3      
  962  3                                      for (i = 0u; i < sizeof(descResExtendedData); i++)
  963  3                                      {
  964  4                                              pMsgContext->resData[i+2] = descResExtendedData[i];
  965  4                                      }
  966  3                                      CanTx_descResMsgSendEnable();
  967  3                              
  968  3                                      break;
  969  3                              
  970  3                              default:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 17  

  971  3                                      DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);
  972  3                                      break;
  973  3                      }               
  974  2              }
  975  1              else
  976  1              {
  977  2                      DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);             
  978  2              }
  979  1      }
  980         
  981         /*  ********************************************************************************
  982          * Function name:ApplDescReadDtcInfo_ReportSupportedDtc (Service request header:$19 $A )
  983          * Description: not available 
  984          * Returns:  nothing
  985          * Parameter(s):
  986          *   - pMsgContext->reqData:
  987          *       - Points to the first service request data byte.
  988          *       - Access type: read
  989          *   - pMsgContext->resData:
  990          *       - Points to the first writeable byte for the service response data.
  991          *       - Access type: read/write
  992          *   - pMsgContext->reqDataLen:
  993          *       - Contains the count of the service request data bytes (Sid is excluded).
  994          *       - Access type: read
  995          *   - pMsgContext->resDataLen:
  996          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
  997          *       - Access type: read/write
  998          *   - pMsgContext->msgAddInfo.reqType:
  999          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1000          *       - Access type: read
 1001          *   - pMsgContext->msgAddInfo.resOnReq:
 1002          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1003          *       - Access type: read/write
 1004          *   - pMsgContext->msgAddInfo.suppPosRes:
 1005          *       - UDS only!If set no positive response will be sent on this request.
 1006          *       - Access type: read
 1007          * Particularitie(s) and limitation(s):
 1008          *   - The function "DescProcessingDone" must be called from now on (within this
 1009          * main-handler or later).
 1010          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1011          * but before calling "DescProcessingDone".
 1012          ********************************************************************************  */
 1013         DESC_SERVICE_STAT void ApplDescReadDtcInfo_ReportSupportedDtc(DescMsgContext* pMsgContext)
 1014         {
 1015  1              INT8U i;
 1016  1              INT16U dtc_num = 0u;
 1017  1              DESC_SERVICE_STAT INT8U descResDtcReportStatus[DTC_CODE_MAX_NUM*4] = {0u};
 1018  1      
 1019  1              if (2u == pMsgContext->reqDataLen)
 1020  1              {
 1021  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1022  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1023  2                      pMsgContext->resData[2] = DTC_STATUS_AVAILABILITY_MASK; 
 1024  2      
 1025  2                  dtc_num = DescMgr_CanDiagGetSupportedDtc(descResDtcReportStatus);
 1026  2                  pMsgContext->resDataLen = (INT8U)(3u + dtc_num * 4u);
 1027  2      
 1028  2                      for (i = 0u; i < (dtc_num * 4u); i++)
 1029  2                      {
 1030  3                              pMsgContext->resData[i+3] = descResDtcReportStatus[i];
 1031  3                      }
 1032  2                      CanTx_descResMsgSendEnable();           
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 18  

 1033  2              }
 1034  1              else
 1035  1              {
 1036  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 1037  2              }       
 1038  1      }
 1039         
 1040         /*  ********************************************************************************
 1041          * Function name:ApplDescReadByDataIdentifier_OEM_SparePartNumber (Service request header:$22 $F1 $87 )
 1042          * Description: not available 
 1043          * Returns:  nothing
 1044          * Parameter(s):
 1045          *   - pMsgContext->reqData:
 1046          *       - Points to the first service request data byte.
 1047          *       - Access type: read
 1048          *   - pMsgContext->resData:
 1049          *       - Points to the first writeable byte for the service response data.
 1050          *       - Access type: read/write
 1051          *   - pMsgContext->reqDataLen:
 1052          *       - Contains the count of the service request data bytes (Sid is excluded).
 1053          *       - Access type: read
 1054          *   - pMsgContext->resDataLen:
 1055          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1056          *       - Access type: read/write
 1057          *   - pMsgContext->msgAddInfo.reqType:
 1058          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1059          *       - Access type: read
 1060          *   - pMsgContext->msgAddInfo.resOnReq:
 1061          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1062          *       - Access type: read/write
 1063          *   - pMsgContext->msgAddInfo.suppPosRes:
 1064          *       - UDS only!If set no positive response will be sent on this request.
 1065          *       - Access type: read
 1066          * Particularitie(s) and limitation(s):
 1067          *   - The function "DescProcessingDone" must be called from now on (within this
 1068          * main-handler or later).
 1069          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1070          * but before calling "DescProcessingDone".
 1071          ********************************************************************************  */
 1072         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_OEM_SparePartNumber(DescMsgContext* pMsgContext)
 1073         {
 1074  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 1075  1              /* Contains no request data */
 1076  1              /* Dummy example of how to write the response data. */
 1077  1      
 1078  1              INT8U i; 
 1079  1      
 1080  1              if (0x03 == pMsgContext->reqDataLen)
 1081  1              {
 1082  2                      if (0u == VCU_VehicleSpeed)
 1083  2                      {
 1084  3                              pMsgContext->resDataLen = sizeof(VehicleManufacturerSparePartNumberDataIdentifier) + 3u;
 1085  3      
 1086  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1087  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1088  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];      
 1089  3                              
 1090  3                              for (i = 0u; i < sizeof(VehicleManufacturerSparePartNumberDataIdentifier); i++)
 1091  3                              {
 1092  4                                      pMsgContext->resData[i+3] = VehicleManufacturerSparePartNumberDataIdentifier[i];
 1093  4                              }               
 1094  3                              CanTx_descResMsgSendEnable();
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 19  

 1095  3                      }
 1096  2                      else
 1097  2                      {
 1098  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                  
 1099  3                      } 
 1100  2              }
 1101  1              else
 1102  1              {
 1103  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat); 
 1104  2              }
 1105  1      }
 1106         
 1107         /*  ********************************************************************************
 1108          * Function name:ApplDescReadByDataIdentifier_SupplierInformation (Service request header:$22 $F1 $8A )
 1109          * Description: not available 
 1110          * Returns:  nothing
 1111          * Parameter(s):
 1112          *   - pMsgContext->reqData:
 1113          *       - Points to the first service request data byte.
 1114          *       - Access type: read
 1115          *   - pMsgContext->resData:
 1116          *       - Points to the first writeable byte for the service response data.
 1117          *       - Access type: read/write
 1118          *   - pMsgContext->reqDataLen:
 1119          *       - Contains the count of the service request data bytes (Sid is excluded).
 1120          *       - Access type: read
 1121          *   - pMsgContext->resDataLen:
 1122          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1123          *       - Access type: read/write
 1124          *   - pMsgContext->msgAddInfo.reqType:
 1125          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1126          *       - Access type: read
 1127          *   - pMsgContext->msgAddInfo.resOnReq:
 1128          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1129          *       - Access type: read/write
 1130          *   - pMsgContext->msgAddInfo.suppPosRes:
 1131          *       - UDS only!If set no positive response will be sent on this request.
 1132          *       - Access type: read
 1133          * Particularitie(s) and limitation(s):
 1134          *   - The function "DescProcessingDone" must be called from now on (within this
 1135          * main-handler or later).
 1136          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1137          * but before calling "DescProcessingDone".
 1138          ********************************************************************************  */
 1139         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_SupplierInformation(DescMsgContext* pMsgContext)
 1140         {
 1141  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 1142  1              /* Contains no request data */
 1143  1              /* Dummy example of how to write the response data. */
 1144  1      
 1145  1              INT8U i; 
 1146  1      
 1147  1              if (0x03 == pMsgContext->reqDataLen) 
 1148  1              { 
 1149  2                      if (0u == VCU_VehicleSpeed)
 1150  2                      {
 1151  3                              pMsgContext->resDataLen = sizeof(SystemSupplierIdentifierDataIdentifier) + 3u;
 1152  3      
 1153  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1154  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1155  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];
 1156  3                              
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 20  

 1157  3                              for (i = 0u; i < sizeof(SystemSupplierIdentifierDataIdentifier); i++)
 1158  3                              {
 1159  4                                      pMsgContext->resData[i+3] = SystemSupplierIdentifierDataIdentifier[i];
 1160  4                              }
 1161  3                              CanTx_descResMsgSendEnable();
 1162  3                      }
 1163  2                      else
 1164  2                      {
 1165  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                  
 1166  3                      } 
 1167  2              }
 1168  1              else
 1169  1              {
 1170  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 1171  2              }
 1172  1      }
 1173         
 1174         /*  ********************************************************************************
 1175          * Function name:ApplDescReadByDataIdentifier_ECU_SerialNumber (Service request header:$22 $F1 $8C )
 1176          * Description: not available 
 1177          * Returns:  nothing
 1178          * Parameter(s):
 1179          *   - pMsgContext->reqData:
 1180          *       - Points to the first service request data byte.
 1181          *       - Access type: read
 1182          *   - pMsgContext->resData:
 1183          *       - Points to the first writeable byte for the service response data.
 1184          *       - Access type: read/write
 1185          *   - pMsgContext->reqDataLen:
 1186          *       - Contains the count of the service request data bytes (Sid is excluded).
 1187          *       - Access type: read
 1188          *   - pMsgContext->resDataLen:
 1189          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1190          *       - Access type: read/write
 1191          *   - pMsgContext->msgAddInfo.reqType:
 1192          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1193          *       - Access type: read
 1194          *   - pMsgContext->msgAddInfo.resOnReq:
 1195          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1196          *       - Access type: read/write
 1197          *   - pMsgContext->msgAddInfo.suppPosRes:
 1198          *       - UDS only!If set no positive response will be sent on this request.
 1199          *       - Access type: read
 1200          * Particularitie(s) and limitation(s):
 1201          *   - The function "DescProcessingDone" must be called from now on (within this
 1202          * main-handler or later).
 1203          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1204          * but before calling "DescProcessingDone".
 1205          ********************************************************************************  */
 1206         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_ECU_SerialNumber(DescMsgContext* pMsgContext)
 1207         {
 1208  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 1209  1              /* Contains no request data */
 1210  1              /* Dummy example of how to write the response data. */
 1211  1      
 1212  1              INT8U i; 
 1213  1      
 1214  1              if (0x03 == pMsgContext->reqDataLen) 
 1215  1              {
 1216  2                      if (0u == VCU_VehicleSpeed)
 1217  2                      {
 1218  3                              ReadString_v_g(descDataIdentifier.systemSerialNumber, ECU_SERIAL_NUM_ADDRESS, ECU_SERIAL_NUM_LENGTH);
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 21  

 1219  3      
 1220  3                              pMsgContext->resDataLen = ECU_SERIAL_NUM_LENGTH + 3u;
 1221  3      
 1222  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1223  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1224  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];
 1225  3                              
 1226  3                              for (i = 0u; i<ECU_SERIAL_NUM_LENGTH; i++)
 1227  3                              {
 1228  4                                      pMsgContext->resData[i+3] = descDataIdentifier.systemSerialNumber[i];
 1229  4                              }
 1230  3                              CanTx_descResMsgSendEnable();
 1231  3                      }
 1232  2                      else
 1233  2                      {
 1234  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 1235  3                      } 
 1236  2              }
 1237  1              else
 1238  1              {
 1239  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 1240  2              }
 1241  1      }
 1242         
 1243         /*  ********************************************************************************
 1244          * Function name:ApplDescReadByDataIdentifier_OEM_VIN (Service request header:$22 $F1 $90 )
 1245          * Description: not available 
 1246          * Returns:  nothing
 1247          * Parameter(s):
 1248          *   - pMsgContext->reqData:
 1249          *       - Points to the first service request data byte.
 1250          *       - Access type: read
 1251          *   - pMsgContext->resData:
 1252          *       - Points to the first writeable byte for the service response data.
 1253          *       - Access type: read/write
 1254          *   - pMsgContext->reqDataLen:
 1255          *       - Contains the count of the service request data bytes (Sid is excluded).
 1256          *       - Access type: read
 1257          *   - pMsgContext->resDataLen:
 1258          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1259          *       - Access type: read/write
 1260          *   - pMsgContext->msgAddInfo.reqType:
 1261          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1262          *       - Access type: read
 1263          *   - pMsgContext->msgAddInfo.resOnReq:
 1264          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1265          *       - Access type: read/write
 1266          *   - pMsgContext->msgAddInfo.suppPosRes:
 1267          *       - UDS only!If set no positive response will be sent on this request.
 1268          *       - Access type: read
 1269          * Particularitie(s) and limitation(s):
 1270          *   - The function "DescProcessingDone" must be called from now on (within this
 1271          * main-handler or later).
 1272          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1273          * but before calling "DescProcessingDone".
 1274          ********************************************************************************  */
 1275         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_OEM_VIN(DescMsgContext* pMsgContext)
 1276         {
 1277  1              INT8U i; 
 1278  1      
 1279  1              if (0x03 == pMsgContext->reqDataLen) 
 1280  1              { 
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 22  

 1281  2                      if (0u == VCU_VehicleSpeed)
 1282  2                      {
 1283  3                              ReadString_v_g(descDataIdentifier.OEM_VIN, VIN_VALUE_ADDRESS, VIN_VALUE_LENGTH);        
 1284  3      
 1285  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1286  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1287  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];
 1288  3                              
 1289  3                              if(0x01 == descDataIdentifier.OEM_VIN[VIN_VALUE_LENGTH - 1])
 1290  3                              {
 1291  4                                      for (i = 0u; i < (VIN_VALUE_LENGTH - 1); i++)
 1292  4                                      {
 1293  5                                              pMsgContext->resData[i + 3] = descDataIdentifier.OEM_VIN[i];
 1294  5                                      }
 1295  4                              }
 1296  3                              else
 1297  3                              {
 1298  4                                      for (i = 0u; i < (VIN_VALUE_LENGTH - 1); i++)
 1299  4                                      {
 1300  5                                              pMsgContext->resData[i + 3] = 0xFF;
 1301  5                                      }
 1302  4                              }
 1303  3                              
 1304  3                              pMsgContext->resDataLen = (VIN_VALUE_LENGTH - 1) + 3u;
 1305  3                              CanTx_descResMsgSendEnable();
 1306  3                      }
 1307  2                      else
 1308  2                      {
 1309  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 1310  3                      } 
 1311  2              }
 1312  1              else
 1313  1              {
 1314  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat); 
 1315  2              }
 1316  1      }
 1317                 
 1318         /*  ********************************************************************************
 1319          * Function name:ApplDescReadByDataIdentifier_ECU_HardwareVersionNumber (Service request header:$22 $F1 $9
             -3 )
 1320          * Description: not available 
 1321          * Returns:  nothing
 1322          * Parameter(s):
 1323          *   - pMsgContext->reqData:
 1324          *       - Points to the first service request data byte.
 1325          *       - Access type: read
 1326          *   - pMsgContext->resData:
 1327          *       - Points to the first writeable byte for the service response data.
 1328          *       - Access type: read/write
 1329          *   - pMsgContext->reqDataLen:
 1330          *       - Contains the count of the service request data bytes (Sid is excluded).
 1331          *       - Access type: read
 1332          *   - pMsgContext->resDataLen:
 1333          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1334          *       - Access type: read/write
 1335          *   - pMsgContext->msgAddInfo.reqType:
 1336          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1337          *       - Access type: read
 1338          *   - pMsgContext->msgAddInfo.resOnReq:
 1339          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1340          *       - Access type: read/write
 1341          *   - pMsgContext->msgAddInfo.suppPosRes:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 23  

 1342          *       - UDS only!If set no positive response will be sent on this request.
 1343          *       - Access type: read
 1344          * Particularitie(s) and limitation(s):
 1345          *   - The function "DescProcessingDone" must be called from now on (within this
 1346          * main-handler or later).
 1347          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1348          * but before calling "DescProcessingDone".
 1349          ********************************************************************************  */
 1350         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_ECU_HardwareVersionNumber(DescMsgContext* pMsgContext)
 1351         {
 1352  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 1353  1              /* Contains no request data */
 1354  1              /* Dummy example of how to write the response data. */
 1355  1      
 1356  1              INT8U i; 
 1357  1      
 1358  1              if (0x03 == pMsgContext->reqDataLen)
 1359  1              {
 1360  2                      if (0u == VCU_VehicleSpeed)
 1361  2                      {
 1362  3                              pMsgContext->resDataLen = sizeof(SystemHardwareVersionDataIdentifier) + 3u;     
 1363  3      
 1364  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1365  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1366  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];
 1367  3                              
 1368  3                              for (i=0u; i<sizeof(SystemHardwareVersionDataIdentifier); i++)
 1369  3                              {
 1370  4                                      pMsgContext->resData[i+3] = SystemHardwareVersionDataIdentifier[i];                                     
 1371  4                              }
 1372  3                              CanTx_descResMsgSendEnable();                           
 1373  3                      }
 1374  2                      else
 1375  2                      {
 1376  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                  
 1377  3                      } 
 1378  2              }
 1379  1              else
 1380  1              {
 1381  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat); 
 1382  2              }
 1383  1      }
 1384         
 1385         /*  ********************************************************************************
 1386          * Function name:ApplDescReadByDataIdentifier_ECU_SoftwareVersionNumber (Service request header:$22 $F1 $9
             -5 )
 1387          * Description: not available 
 1388          * Returns:  nothing
 1389          * Parameter(s):
 1390          *   - pMsgContext->reqData:
 1391          *       - Points to the first service request data byte.
 1392          *       - Access type: read
 1393          *   - pMsgContext->resData:
 1394          *       - Points to the first writeable byte for the service response data.
 1395          *       - Access type: read/write
 1396          *   - pMsgContext->reqDataLen:
 1397          *       - Contains the count of the service request data bytes (Sid is excluded).
 1398          *       - Access type: read
 1399          *   - pMsgContext->resDataLen:
 1400          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1401          *       - Access type: read/write
 1402          *   - pMsgContext->msgAddInfo.reqType:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 24  

 1403          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1404          *       - Access type: read
 1405          *   - pMsgContext->msgAddInfo.resOnReq:
 1406          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1407          *       - Access type: read/write
 1408          *   - pMsgContext->msgAddInfo.suppPosRes:
 1409          *       - UDS only!If set no positive response will be sent on this request.
 1410          *       - Access type: read
 1411          * Particularitie(s) and limitation(s):
 1412          *   - The function "DescProcessingDone" must be called from now on (within this
 1413          * main-handler or later).
 1414          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1415          * but before calling "DescProcessingDone".
 1416          ********************************************************************************  */
 1417         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_ECU_SoftwareVersionNumber(DescMsgContext* pMsgContext)
 1418         {
 1419  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 1420  1              /* Contains no request data */
 1421  1              /* Dummy example of how to write the response data. */
 1422  1      
 1423  1              INT8U i; 
 1424  1              
 1425  1              if (0x03 == pMsgContext->reqDataLen) 
 1426  1              { 
 1427  2                      if (0u == VCU_VehicleSpeed)
 1428  2                      {
 1429  3                              pMsgContext->resDataLen = sizeof(SystemSoftwareVersionDataIdentifier) + 3u;     
 1430  3      
 1431  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1432  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1433  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];
 1434  3                              
 1435  3                              for (i = 0u; i < sizeof(SystemSoftwareVersionDataIdentifier); i++)
 1436  3                              {
 1437  4                                      pMsgContext->resData[i+3] = SystemSoftwareVersionDataIdentifier[i];
 1438  4                              }
 1439  3                              CanTx_descResMsgSendEnable();
 1440  3                      }
 1441  2                      else
 1442  2                      {
 1443  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 1444  3                      } 
 1445  2              }
 1446  1              else
 1447  1              {
 1448  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat); 
 1449  2              }
 1450  1      }
 1451         
 1452         /*  ********************************************************************************
 1453          * Function name:ApplDescReadByDataIdentifier_SystemNameDataNumber (Service request header:$22 $F1 $97 )
 1454          * Description: not available 
 1455          * Returns:  nothing
 1456          * Parameter(s):
 1457          *   - pMsgContext->reqData:
 1458          *       - Points to the first service request data byte.
 1459          *       - Access type: read
 1460          *   - pMsgContext->resData:
 1461          *       - Points to the first writeable byte for the service response data.
 1462          *       - Access type: read/write
 1463          *   - pMsgContext->reqDataLen:
 1464          *       - Contains the count of the service request data bytes (Sid is excluded).
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 25  

 1465          *       - Access type: read
 1466          *   - pMsgContext->resDataLen:
 1467          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1468          *       - Access type: read/write
 1469          *   - pMsgContext->msgAddInfo.reqType:
 1470          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1471          *       - Access type: read
 1472          *   - pMsgContext->msgAddInfo.resOnReq:
 1473          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1474          *       - Access type: read/write
 1475          *   - pMsgContext->msgAddInfo.suppPosRes:
 1476          *       - UDS only!If set no positive response will be sent on this request.
 1477          *       - Access type: read
 1478          * Particularitie(s) and limitation(s):
 1479          *   - The function "DescProcessingDone" must be called from now on (within this
 1480          * main-handler or later).
 1481          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1482          * but before calling "DescProcessingDone".
 1483          ********************************************************************************  */
 1484         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_SystemNameDataNumber(DescMsgContext* pMsgContext)
 1485         {
 1486  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 1487  1              /* Contains no request data */
 1488  1              /* Dummy example of how to write the response data. */
 1489  1      
 1490  1              INT8U i; 
 1491  1      
 1492  1              if (0x03 == pMsgContext->reqDataLen) 
 1493  1              { 
 1494  2                      if (0u == VCU_VehicleSpeed)
 1495  2                      {
 1496  3                              pMsgContext->resDataLen = sizeof(SystemNameDataIdentifier) + 3u;
 1497  3      
 1498  3                              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1499  3                              pMsgContext->resData[1] = pMsgContext->reqData[1];
 1500  3                              pMsgContext->resData[2] = pMsgContext->reqData[2];
 1501  3                              
 1502  3                              /* First data frame */
 1503  3                              for (i=0u; i<sizeof(SystemNameDataIdentifier); i++)
 1504  3                              {
 1505  4                                      pMsgContext->resData[i+3] = SystemNameDataIdentifier[i];
 1506  4                              }
 1507  3                              CanTx_descResMsgSendEnable();
 1508  3                      }
 1509  2                      else
 1510  2                      {
 1511  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 1512  3                      } 
 1513  2              }
 1514  1              else
 1515  1              {
 1516  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 1517  2              }
 1518  1      }
 1519         
 1520         
 1521         /*  ********************************************************************************
 1522          * Function name:ApplDescSimulateAdcData (Service request header:$22 $66 $66 )
 1523          * Description: not available 
 1524          * Returns:  nothing
 1525          * Parameter(s):
 1526          *   - pMsgContext->reqData:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 26  

 1527          *       - Points to the first service request data byte.
 1528          *       - Access type: read
 1529          *   - pMsgContext->resData:
 1530          *       - Points to the first writeable byte for the service response data.
 1531          *       - Access type: read/write
 1532          *   - pMsgContext->reqDataLen:
 1533          *       - Contains the count of the service request data bytes (Sid is excluded).
 1534          *       - Access type: read
 1535          *   - pMsgContext->resDataLen:
 1536          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1537          *       - Access type: read/write
 1538          *   - pMsgContext->msgAddInfo.reqType:
 1539          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1540          *       - Access type: read
 1541          *   - pMsgContext->msgAddInfo.resOnReq:
 1542          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1543          *       - Access type: read/write
 1544          *   - pMsgContext->msgAddInfo.suppPosRes:
 1545          *       - UDS only!If set no positive response will be sent on this request.
 1546          *       - Access type: read
 1547          * Particularitie(s) and limitation(s):
 1548          *   - The function "DescProcessingDone" must be called from now on (within this
 1549          * main-handler or later).
 1550          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1551          * but before calling "DescProcessingDone".
 1552          ********************************************************************************  */
 1553         DESC_SERVICE_STAT void ApplDescSimulateAdcData(DescMsgContext* pMsgContext)
 1554         {
 1555  1      
 1556  1              if ((7 == pMsgContext->reqDataLen)
 1557  1                      && (pMsgContext->reqData[4] < 15))
 1558  1              {
 1559  2                      if (0x01 == pMsgContext->reqData[3])
 1560  2                      {
 1561  3                              g_adcSimulateDataFlag = TRUE;
 1562  3                              
 1563  3                              g_adcSimulateDataIndex = pMsgContext->reqData[4];// adc channel index
 1564  3                              g_adcSimulateData = (pMsgContext->reqData[5] << 8) | pMsgContext->reqData[6];// adc channel data
 1565  3                      }
 1566  2                      else
 1567  2                      {
 1568  3                              g_adcSimulateDataFlag = FALSE;
 1569  3                              g_adcSimulateDataIndex = 0;
 1570  3                              g_adcSimulateData = 0;
 1571  3                      }
 1572  2                      pMsgContext->resDataLen = 0x03;         
 1573  2                      DescSetPosResponse(pMsgContext);
 1574  2              }
 1575  1              else
 1576  1              {
 1577  2              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1578  2              }
 1579  1      }
 1580         
 1581         
 1582         /*  ********************************************************************************
 1583          * Function name:ApplDescReadByDataIdentifier_EepromData (Service request header:$22 $66 $67 )
 1584          * Description: not available 
 1585          * Returns:  nothing
 1586          * Parameter(s):
 1587          *   - pMsgContext->reqData:
 1588          *       - Points to the first service request data byte.
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 27  

 1589          *       - Access type: read
 1590          *   - pMsgContext->resData:
 1591          *       - Points to the first writeable byte for the service response data.
 1592          *       - Access type: read/write
 1593          *   - pMsgContext->reqDataLen:
 1594          *       - Contains the count of the service request data bytes (Sid is excluded).
 1595          *       - Access type: read
 1596          *   - pMsgContext->resDataLen:
 1597          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1598          *       - Access type: read/write
 1599          *   - pMsgContext->msgAddInfo.reqType:
 1600          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1601          *       - Access type: read
 1602          *   - pMsgContext->msgAddInfo.resOnReq:
 1603          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1604          *       - Access type: read/write
 1605          *   - pMsgContext->msgAddInfo.suppPosRes:
 1606          *       - UDS only!If set no positive response will be sent on this request.
 1607          *       - Access type: read
 1608          * Particularitie(s) and limitation(s):
 1609          *   - The function "DescProcessingDone" must be called from now on (within this
 1610          * main-handler or later).
 1611          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1612          * but before calling "DescProcessingDone".
 1613          ********************************************************************************  */
 1614         DESC_SERVICE_STAT void ApplDescReadByDataIdentifier_EepromData(DescMsgContext* pMsgContext)
 1615         {
 1616  1              INT8U i;
 1617  1              INT16U eepromDataLength = 0;
 1618  1              INT32U eepromDataAddress = 0;
 1619  1              INT8U dataBuffer[256] = {0};
 1620  1              
 1621  1              if (6 == pMsgContext->reqDataLen)
 1622  1              {
 1623  2                      eepromDataAddress = ((INT32U)0xC40000) | ((INT32U)pMsgContext->reqData[3] << 8) | ((INT32U)pMsgContext->
             -reqData[4]);
 1624  2                      eepromDataLength = pMsgContext->reqData[5];
 1625  2                      ReadString_v_g(dataBuffer, eepromDataAddress, eepromDataLength);
 1626  2      
 1627  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1628  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1629  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1630  2                      pMsgContext->resDataLen = eepromDataLength + 3u;
 1631  2                      
 1632  2                      for (i = 0u; i < eepromDataLength; i++)
 1633  2                      {
 1634  3                              pMsgContext->resData[i + 3] = dataBuffer[i];
 1635  3                      }
 1636  2                      CanTx_descResMsgSendEnable();
 1637  2              }
 1638  1              else
 1639  1              {
 1640  2              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1641  2              }
 1642  1      }
 1643         
 1644         /*  ********************************************************************************
 1645          * Function name:ApplDescReadDataByIdentifier_Pedal_Cylinder_Data (Service request header:$22 $22 $01 )
 1646          * Description: not available 
 1647          * Returns:  nothing
 1648          * Parameter(s):
 1649          *   - pMsgContext->reqData:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 28  

 1650          *       - Points to the first service request data byte.
 1651          *       - Access type: read
 1652          *   - pMsgContext->resData:
 1653          *       - Points to the first writeable byte for the service response data.
 1654          *       - Access type: read/write
 1655          *   - pMsgContext->reqDataLen:
 1656          *       - Contains the count of the service request data bytes (Sid is excluded).
 1657          *       - Access type: read
 1658          *   - pMsgContext->resDataLen:
 1659          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1660          *       - Access type: read/write
 1661          *   - pMsgContext->msgAddInfo.reqType:
 1662          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1663          *       - Access type: read
 1664          *   - pMsgContext->msgAddInfo.resOnReq:
 1665          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1666          *       - Access type: read/write
 1667          *   - pMsgContext->msgAddInfo.suppPosRes:
 1668          *       - UDS only!If set no positive response will be sent on this request.
 1669          *       - Access type: read
 1670          * Particularitie(s) and limitation(s):
 1671          *   - The function "DescProcessingDone" must be called from now on (within this
 1672          * main-handler or later).
 1673          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1674          * but before calling "DescProcessingDone".
 1675          ********************************************************************************  */
 1676         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_Pedal_Cylinder_Data(DescMsgContext* pMsgContext)
 1677         {
 1678  1              const T_ADC *ptr_adc = Adc_SampleData();
 1679  1              
 1680  1              if (3 == pMsgContext->reqDataLen)
 1681  1              {
 1682  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1683  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1684  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1685  2      
 1686  2                      pMsgContext->resData[3] = (INT8U)(gRTE_pedalInitValue[0] >> 8);
 1687  2                      pMsgContext->resData[4] = (INT8U)(gRTE_pedalInitValue[0]);
 1688  2                      pMsgContext->resData[5] = (INT8U)(gRTE_pedalInitValue[1] >> 8);
 1689  2                      pMsgContext->resData[6] = (INT8U)(gRTE_pedalInitValue[1]);
 1690  2                      pMsgContext->resData[7] = (INT8U)(ptr_adc->brakePedalTrip_Adc[0] >> 8);
 1691  2                      pMsgContext->resData[8] = (INT8U)(ptr_adc->brakePedalTrip_Adc[0]);
 1692  2                      pMsgContext->resData[9] = (INT8U)(ptr_adc->brakePedalTrip_Adc[1] >> 8);
 1693  2                      pMsgContext->resData[10] = (INT8U)(ptr_adc->brakePedalTrip_Adc[1]);
 1694  2                      
 1695  2                      pMsgContext->resData[11] = (INT8U)(gRTE_cylinderInitValue[0] >> 8);
 1696  2                      pMsgContext->resData[12] = (INT8U)(gRTE_cylinderInitValue[0]);
 1697  2                      pMsgContext->resData[13] = (INT8U)(gRTE_cylinderInitValue[1] >> 8);
 1698  2                      pMsgContext->resData[14] = (INT8U)(gRTE_cylinderInitValue[1]);
 1699  2                      pMsgContext->resData[15] = (INT8U)(ptr_adc->mainCylinderTrip_Adc[0] >> 8);
 1700  2                      pMsgContext->resData[16] = (INT8U)(ptr_adc->mainCylinderTrip_Adc[0]);
 1701  2                      pMsgContext->resData[17] = (INT8U)(ptr_adc->mainCylinderTrip_Adc[1] >> 8);
 1702  2                      pMsgContext->resData[18] = (INT8U)(ptr_adc->mainCylinderTrip_Adc[1]);
 1703  2      
 1704  2                      pMsgContext->resDataLen = 16u + 3u;
 1705  2                      
 1706  2                      CanTx_descResMsgSendEnable();
 1707  2              }
 1708  1              else
 1709  1              {
 1710  2              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1711  2              }
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 29  

 1712  1      }
 1713         
 1714         
 1715         /*  ********************************************************************************
 1716          * Function name:ApplDescReadDataByIdentifier_LongTimeBrake_Times(Service request header:$22 $22 $02 )
 1717          * Description: not available 
 1718          * Returns:  nothing
 1719          * Parameter(s):
 1720          *   - pMsgContext->reqData:
 1721          *       - Points to the first service request data byte.
 1722          *       - Access type: read
 1723          *   - pMsgContext->resData:
 1724          *       - Points to the first writeable byte for the service response data.
 1725          *       - Access type: read/write
 1726          *   - pMsgContext->reqDataLen:
 1727          *       - Contains the count of the service request data bytes (Sid is excluded).
 1728          *       - Access type: read
 1729          *   - pMsgContext->resDataLen:
 1730          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1731          *       - Access type: read/write
 1732          *   - pMsgContext->msgAddInfo.reqType:
 1733          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1734          *       - Access type: read
 1735          *   - pMsgContext->msgAddInfo.resOnReq:
 1736          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1737          *       - Access type: read/write
 1738          *   - pMsgContext->msgAddInfo.suppPosRes:
 1739          *       - UDS only!If set no positive response will be sent on this request.
 1740          *       - Access type: read
 1741          * Particularitie(s) and limitation(s):
 1742          *   - The function "DescProcessingDone" must be called from now on (within this
 1743          * main-handler or later).
 1744          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1745          * but before calling "DescProcessingDone".
 1746          ********************************************************************************  */
 1747         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_LongTimeBrake_Times(DescMsgContext* pMsgContext)
 1748         {       
 1749  1              if (3 == pMsgContext->reqDataLen)
 1750  1              {
 1751  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1752  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1753  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1754  2      
 1755  2                      pMsgContext->resData[3] = (INT8U)((g_longTimeBrakeCnt>>24) & 0xFF);
 1756  2                      pMsgContext->resData[4] = (INT8U)((g_longTimeBrakeCnt>>16) & 0xFF);
 1757  2                      pMsgContext->resData[5] = (INT8U)((g_longTimeBrakeCnt>>8)  & 0xFF);
 1758  2                      pMsgContext->resData[6] = (INT8U)( g_longTimeBrakeCnt      & 0xFF);
 1759  2      
 1760  2                      pMsgContext->resDataLen = 7u;
 1761  2                      
 1762  2                      CanTx_descResMsgSendEnable();
 1763  2              }
 1764  1              else
 1765  1              {
 1766  2              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1767  2              }
 1768  1      }
 1769         
 1770         
 1771         /*  ********************************************************************************
 1772          * Function name:ApplDescReadDataByIdentifier_SettingParameter_Data1(Service request header:$22 $DE $F0 )
 1773          * Description: not available 
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 30  

 1774          * Returns:  nothing
 1775          * Parameter(s):
 1776          *   - pMsgContext->reqData:
 1777          *       - Points to the first service request data byte.
 1778          *       - Access type: read
 1779          *   - pMsgContext->resData:
 1780          *       - Points to the first writeable byte for the service response data.
 1781          *       - Access type: read/write
 1782          *   - pMsgContext->reqDataLen:
 1783          *       - Contains the count of the service request data bytes (Sid is excluded).
 1784          *       - Access type: read
 1785          *   - pMsgContext->resDataLen:
 1786          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 1787          *       - Access type: read/write
 1788          *   - pMsgContext->msgAddInfo.reqType:
 1789          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 1790          *       - Access type: read
 1791          *   - pMsgContext->msgAddInfo.resOnReq:
 1792          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 1793          *       - Access type: read/write
 1794          *   - pMsgContext->msgAddInfo.suppPosRes:
 1795          *       - UDS only!If set no positive response will be sent on this request.
 1796          *       - Access type: read
 1797          * Particularitie(s) and limitation(s):
 1798          *   - The function "DescProcessingDone" must be called from now on (within this
 1799          * main-handler or later).
 1800          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 1801          * but before calling "DescProcessingDone".
 1802          ********************************************************************************  */
 1803         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data1(DescMsgContext* pMsgContext)
 1804         {       
 1805  1              if (3 == pMsgContext->reqDataLen)
 1806  1              {
 1807  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1808  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1809  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1810  2      
 1811  2                      Std_DataCopy(pressure_To_cylinder, &pMsgContext->resData[3], sizeof(pressure_To_cylinder));     
 1812  2                      pMsgContext->resDataLen = 3u + sizeof(pressure_To_cylinder);
 1813  2                              
 1814  2                      CanTx_descResMsgSendEnable();
 1815  2              }
 1816  1              else
 1817  1              {
 1818  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1819  2              }
 1820  1      }
 1821         
 1822         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data2(DescMsgContext* pMsgContext)
 1823         {       
 1824  1              if (3 == pMsgContext->reqDataLen)
 1825  1              {
 1826  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1827  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1828  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1829  2      
 1830  2                      Std_DataCopy(cylinder_To_pressure, &pMsgContext->resData[3], sizeof(cylinder_To_pressure));             
 1831  2                      pMsgContext->resDataLen = 3u + sizeof(cylinder_To_pressure);
 1832  2                              
 1833  2                      CanTx_descResMsgSendEnable();
 1834  2              }
 1835  1              else
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 31  

 1836  1              {
 1837  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1838  2              }
 1839  1      }
 1840         
 1841         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data3(DescMsgContext* pMsgContext)
 1842         {       
 1843  1              if (3 == pMsgContext->reqDataLen)
 1844  1              {
 1845  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1846  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1847  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1848  2      
 1849  2                      Std_DataCopy(current_To_pressure, &pMsgContext->resData[3], sizeof(current_To_pressure));       
 1850  2                      pMsgContext->resDataLen = 3u + sizeof(current_To_pressure);
 1851  2                              
 1852  2                      CanTx_descResMsgSendEnable();
 1853  2              }
 1854  1              else
 1855  1              {
 1856  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1857  2              }
 1858  1      }
 1859         
 1860         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data4(DescMsgContext* pMsgContext)
 1861         {       
 1862  1              if (3 == pMsgContext->reqDataLen)
 1863  1              {
 1864  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1865  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1866  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1867  2      
 1868  2                      Std_DataCopy(pressure_To_current, &pMsgContext->resData[3], sizeof(pressure_To_current));
 1869  2                      pMsgContext->resDataLen = 3u + sizeof(pressure_To_current);
 1870  2                              
 1871  2                      CanTx_descResMsgSendEnable();
 1872  2              }
 1873  1              else
 1874  1              {
 1875  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1876  2              }
 1877  1      }
 1878         
 1879         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data5(DescMsgContext* pMsgContext)
 1880         {       
 1881  1              if (3 == pMsgContext->reqDataLen)
 1882  1              {
 1883  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1884  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1885  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1886  2      
 1887  2                      Std_DataCopy(pedal_To_cylinder, &pMsgContext->resData[3], sizeof(pedal_To_cylinder));
 1888  2                      pMsgContext->resDataLen = 3u + sizeof(pedal_To_cylinder);
 1889  2                              
 1890  2                      CanTx_descResMsgSendEnable();
 1891  2              }
 1892  1              else
 1893  1              {
 1894  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1895  2              }
 1896  1      }
 1897         
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 32  

 1898         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data6(DescMsgContext* pMsgContext)
 1899         {       
 1900  1              if (3 == pMsgContext->reqDataLen)
 1901  1              {
 1902  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1903  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1904  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1905  2      
 1906  2                      Std_DataCopy(cylinder_To_current, &pMsgContext->resData[3], sizeof(cylinder_To_current));
 1907  2                      pMsgContext->resDataLen = 3u + sizeof(cylinder_To_current);
 1908  2                              
 1909  2                      CanTx_descResMsgSendEnable();
 1910  2              }
 1911  1              else
 1912  1              {
 1913  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1914  2              }
 1915  1      }
 1916         
 1917         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data7(DescMsgContext* pMsgContext)
 1918         {       
 1919  1              if (3 == pMsgContext->reqDataLen)
 1920  1              {
 1921  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1922  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1923  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1924  2      
 1925  2                      Std_DataCopy(current_To_pwm, &pMsgContext->resData[3], sizeof(current_To_pwm));
 1926  2                      pMsgContext->resDataLen = 3u + sizeof(current_To_pwm);
 1927  2                              
 1928  2                      CanTx_descResMsgSendEnable();
 1929  2              }
 1930  1              else
 1931  1              {
 1932  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1933  2              }
 1934  1      }
 1935         
 1936         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data8(DescMsgContext* pMsgContext)
 1937         {       
 1938  1              if (3 == pMsgContext->reqDataLen)
 1939  1              {
 1940  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 1941  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1942  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1943  2      
 1944  2                      Std_DataCopy(pedal_To_current, &pMsgContext->resData[3], sizeof(pedal_To_current));
 1945  2                      pMsgContext->resDataLen = 3u + sizeof(pedal_To_current);
 1946  2                              
 1947  2                      CanTx_descResMsgSendEnable();
 1948  2              }
 1949  1              else
 1950  1              {
 1951  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 1952  2              }
 1953  1      }
 1954         
 1955         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data9(DescMsgContext* pMsgContext)
 1956         {       
 1957  1              if (3 == pMsgContext->reqDataLen)
 1958  1              {
 1959  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 33  

 1960  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 1961  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 1962  2                      
 1963  2                      
 1964  2                      //Position loop PID, KP, KI, KD term parameters
 1965  2                      pMsgContext->resData[3] = (INT8U)(gRTE_locationKp >> 8);
 1966  2                      pMsgContext->resData[4] = (INT8U)(gRTE_locationKp);
 1967  2                      pMsgContext->resData[5] = (INT8U)(gRTE_locationKi >> 8);
 1968  2                      pMsgContext->resData[6] = (INT8U)(gRTE_locationKi);
 1969  2                      pMsgContext->resData[7] = (INT8U)(gRTE_locationKd >> 8);
 1970  2                      pMsgContext->resData[8] = (INT8U)(gRTE_locationKd);
 1971  2      
 1972  2                      //Current loop PID, KP, KI, KD term parameters
 1973  2                      pMsgContext->resData[9] = (INT8U)(gRTE_currentKp >> 8);
 1974  2                      pMsgContext->resData[10] = (INT8U)(gRTE_currentKp);
 1975  2                      pMsgContext->resData[11] = (INT8U)(gRTE_currentKi >> 8);
 1976  2                      pMsgContext->resData[12] = (INT8U)(gRTE_currentKi);
 1977  2                      pMsgContext->resData[13] = (INT8U)(gRTE_currentKd >> 8);
 1978  2                      pMsgContext->resData[14] = (INT8U)(gRTE_currentKd);
 1979  2      
 1980  2                      //only position loop PID, KP, KI, KD term parameters
 1981  2                      pMsgContext->resData[15] = (INT8U)(gRTE_onlyPositionKp >> 8);
 1982  2                      pMsgContext->resData[16] = (INT8U)(gRTE_onlyPositionKp);
 1983  2                      pMsgContext->resData[17] = (INT8U)(gRTE_onlyPositionKi >> 8);
 1984  2                      pMsgContext->resData[18] = (INT8U)(gRTE_onlyPositionKi);
 1985  2                      pMsgContext->resData[19] = (INT8U)(gRTE_onlyPositionKd >> 8);
 1986  2                      pMsgContext->resData[20] = (INT8U)(gRTE_onlyPositionKd);
 1987  2      
 1988  2                      //pressure loop PID, KP, KI, KD term parameters
 1989  2                      pMsgContext->resData[21] = (INT8U)(gRTE_pressureKp >> 8);
 1990  2                      pMsgContext->resData[22] = (INT8U)(gRTE_pressureKp);
 1991  2                      pMsgContext->resData[23] = (INT8U)(gRTE_pressureKi >> 8);
 1992  2                      pMsgContext->resData[24] = (INT8U)(gRTE_pressureKi);
 1993  2                      pMsgContext->resData[25] = (INT8U)(gRTE_pressureKd >> 8);
 1994  2                      pMsgContext->resData[26] = (INT8U)(gRTE_pressureKd);
 1995  2      
 1996  2                      pMsgContext->resDataLen = 3u + 24;
 1997  2                              
 1998  2                      CanTx_descResMsgSendEnable();
 1999  2              }
 2000  1              else
 2001  1              {
 2002  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 2003  2              }
 2004  1      }
 2005         
 2006         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data10(DescMsgContext* pMsgContext)
 2007         {       
 2008  1              if (3 == pMsgContext->reqDataLen)
 2009  1              {
 2010  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 2011  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 2012  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 2013  2                      
 2014  2                      pMsgContext->resData[3] = (INT8U)(gRTE_pwmProtectThreshold >> 8);
 2015  2                      pMsgContext->resData[4] = (INT8U)(gRTE_pwmProtectThreshold);
 2016  2                      pMsgContext->resData[5] = (INT8U)(gRTE_controlMaxCurrent >> 8);
 2017  2                      pMsgContext->resData[6] = (INT8U)(gRTE_controlMaxCurrent);
 2018  2                      pMsgContext->resData[7] = (INT8U)(gRTE_dampMinPressure >> 8);
 2019  2                      pMsgContext->resData[8] = (INT8U)(gRTE_dampMinPressure);
 2020  2                      pMsgContext->resData[9] = (INT8U)(gRTE_dampMinCylinder >> 8);
 2021  2                      pMsgContext->resData[10] = (INT8U)(gRTE_dampMinCylinder);
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 34  

 2022  2                      pMsgContext->resData[11] = (INT8U)(gRTE_dampMinCurrent >> 8);
 2023  2                      pMsgContext->resData[12] = (INT8U)(gRTE_dampMinCurrent);
 2024  2      
 2025  2                      pMsgContext->resDataLen = 3u + 10;
 2026  2                              
 2027  2                      CanTx_descResMsgSendEnable();
 2028  2              }
 2029  1              else
 2030  1              {
 2031  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 2032  2              }
 2033  1      }
 2034         
 2035         DESC_SERVICE_STAT void ApplDescReadDataByIdentifier_SettingParameter_Data11(DescMsgContext* pMsgContext)
 2036         {       
 2037  1              if (3 == pMsgContext->reqDataLen)
 2038  1              {
 2039  2                      pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 2040  2                      pMsgContext->resData[1] = pMsgContext->reqData[1];
 2041  2                      pMsgContext->resData[2] = pMsgContext->reqData[2];
 2042  2      
 2043  2                      pMsgContext->resData[3] = BrakeSysMode;
 2044  2                      pMsgContext->resData[4] = gRTE_pidTypeSts;
 2045  2                      pMsgContext->resData[5] = gRTE_wireControlPressureLoopFlag;
 2046  2                      pMsgContext->resData[6] = g_inBrakeSwValidSts;
 2047  2                      pMsgContext->resData[7] = g_inIGNSts;
 2048  2                      pMsgContext->resData[8] = g_inPreDriverErrorSts;
 2049  2                      pMsgContext->resData[9] = g_PedalPowerSts;
 2050  2                      pMsgContext->resData[10] = g_CylinderPowerSts;
 2051  2                      pMsgContext->resData[11] = g_MainRelaySts;
 2052  2                      pMsgContext->resData[12] = g_PredriverEnableSts;
 2053  2                      
 2054  2                      pMsgContext->resData[13] = (INT8U)(g_calibrationParaChangeMask);
 2055  2                      pMsgContext->resData[14] = (INT8U)(g_calibrationParaChangeMask >> 8);
 2056  2                      pMsgContext->resData[15] = (INT8U)(g_calibrationParaChangeMask >> 16);
 2057  2                      pMsgContext->resData[16] = (INT8U)(g_calibrationParaChangeMask >> 24);
 2058  2                      
 2059  2                      pMsgContext->resDataLen = 3u + 14;
 2060  2                              
 2061  2                      CanTx_descResMsgSendEnable();
 2062  2              }
 2063  1              else
 2064  1              {
 2065  2                      DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 2066  2              }
 2067  1      }
 2068         
 2069         
 2070         /*  ********************************************************************************
 2071          * Function name:ApplDescReadMemoryByAddress (Service request header:$23 $24 )
 2072          * Description: not available 
 2073          * Returns:  nothing
 2074          * Parameter(s):
 2075          *   - pMsgContext->reqData:
 2076          *       - Points to the first service request data byte.
 2077          *       - Access type: read
 2078          *   - pMsgContext->resData:
 2079          *       - Points to the first writeable byte for the service response data.
 2080          *       - Access type: read/write
 2081          *   - pMsgContext->reqDataLen:
 2082          *       - Contains the count of the service request data bytes (Sid is excluded).
 2083          *       - Access type: read
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 35  

 2084          *   - pMsgContext->resDataLen:
 2085          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 2086          *       - Access type: read/write
 2087          *   - pMsgContext->msgAddInfo.reqType:
 2088          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 2089          *       - Access type: read
 2090          *   - pMsgContext->msgAddInfo.resOnReq:
 2091          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 2092          *       - Access type: read/write
 2093          *   - pMsgContext->msgAddInfo.suppPosRes:
 2094          *       - UDS only!If set no positive response will be sent on this request.
 2095          *       - Access type: read
 2096          * Particularitie(s) and limitation(s):
 2097          *   - The function "DescProcessingDone" must be called from now on (within this
 2098          * main-handler or later).
 2099          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 2100          * but before calling "DescProcessingDone".
 2101          ********************************************************************************  */
 2102         DESC_SERVICE_STAT void ApplDescReadMemoryByAddress(DescMsgContext* pMsgContext)
 2103         {
 2104  1      #if (kDescEnableService23_ReadMemoryByAddress == 1)
 2105  1      
 2106  1              if (0x08 == pMsgContext->reqDataLen)
 2107  1              {
 2108  2                      if (0u == VCU_VehicleSpeed)
 2109  2                      {
 2110  3                              if (1) // TODO: Check request out of range
 2111  3                              {
 2112  4                                      /* Check address invalid, request memory size invalid 
 2113  4                                       * and addressAndLengthFormatIdentifier invalid. */
 2114  4                              }
 2115  3                              else
 2116  3                              {
 2117  4                                      DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                             
 2118  4                              }
 2119  3                      }
 2120  2                      else
 2121  2                      {
 2122  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);          
 2123  3                      }
 2124  2              }
 2125  1              else
 2126  1              {
 2127  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2128  2              }
 2129  1      #else
                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);     
              
                      DescProcessingDone();
              #endif
 2134  1      }
 2135         
 2136         /*  ********************************************************************************
 2137          * Function name:ApplDescOemGetLevel_1_RequestSeed (Service request header:$27 $01 )
 2138          * Description:Manages the security get seed function.
 2139          * Returns:  nothing
 2140          * Parameter(s):
 2141          *   - pMsgContext:
 2142          *       - Contains all request properties.
 2143          *       - Access type: read/write
 2144          * Particularitie(s) and limitation(s): none
 2145          ********************************************************************************  */
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 36  

 2146         DESC_SERVICE_STAT void ApplDescOemGetLevel_1_RequestSeed(DescMsgContext* pMsgContext)
 2147         {
 2148  1      #if (kDescEnableService27_Level1 == 1)
 2149  1      
 2150  1              DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);     
 2151  1      
 2152  1              if (0x02 == pMsgContext->reqDataLen) 
 2153  1              {
 2154  2                      if (0u == VCU_VehicleSpeed)
 2155  2                      {
 2156  3                              /* When dalay timer active receive the request, send NRC */
 2157  3                              descSecurityRandSeedLevel1 = rand();
 2158  3                      
 2159  3                              if (1) // TODO:Delay timer arrive
 2160  3                              {
 2161  4                                      pMsgContext->resDataLen = 6u;
 2162  4                                      pMsgContext->reqData[2] = (INT8U)((descSecurityRandSeedLevel1 & 0xFF000000) >> 24u);
 2163  4      
 2164  4                                      pMsgContext->resData[3] = (INT8U)((descSecurityRandSeedLevel1 & 0x00FF0000) >> 16u);
 2165  4                                      pMsgContext->resData[4] = (INT8U)((descSecurityRandSeedLevel1 & 0x0000FF00) >> 8u);
 2166  4                                      pMsgContext->resData[5] = (INT8U)(descSecurityRandSeedLevel1 & 0x000000FF);
 2167  4      
 2168  4                                      descSecurityAccessRequestSeedLevelFlag_1 = TRUE;
 2169  4                                      
 2170  4                                      DescSetPosResponse(pMsgContext);
 2171  4                              }
 2172  3                              else
 2173  3                              {
 2174  4                                      descSecurityAccessRequestSeedLevelFlag_1 = FALSE;
 2175  4      
 2176  4                                      DescSetNegResponse(pMsgContext, kDescNrcTimeDelayNotExpired);                           
 2177  4                              }
 2178  3                      }
 2179  2                      else
 2180  2                      {
 2181  3                              descSecurityAccessRequestSeedLevelFlag_1 = FALSE;
 2182  3      
 2183  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                          
 2184  3                      }
 2185  2              }
 2186  1              else
 2187  1              {
 2188  2                      descSecurityAccessRequestSeedLevelFlag_1 = FALSE;
 2189  2      
 2190  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2191  2              }
 2192  1      #else
                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);     
              
                      DescProcessingDone();
              #endif
 2197  1      }
 2198         
 2199         /*  ********************************************************************************
 2200          * Function name:ApplDescOemSendLevel_1_SendKey (Service request header:$27 $02 )
 2201          * Description:Manages the security send key function.
 2202          * Returns:  nothing
 2203          * Parameter(s):
 2204          *   - pMsgContext:
 2205          *       - Contains all request properties.
 2206          *       - Access type: read/write
 2207          * Particularitie(s) and limitation(s): none
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 37  

 2208          ********************************************************************************  */
 2209         DESC_SERVICE_STAT void ApplDescOemSendLevel_1_SendKey(DescMsgContext* pMsgContext)
 2210         {
 2211  1      #if (kDescEnableService27_Level1 == 1)
 2212  1      
 2213  1              if (0x04 == pMsgContext->reqDataLen) 
 2214  1              {
 2215  2                      if (0u == VCU_VehicleSpeed)
 2216  2                      {
 2217  3                              /* When dalay timer active receive the request, send NRC */
 2218  3                              if (1) // TODO:Delay timer arrive
 2219  3                              {
 2220  4                                      if (TRUE == descSecurityAccessRequestSeedLevelFlag_1)
 2221  4                                      {
 2222  5                                              descSendSecurityKeyLevel1 = seedToKey(descSecurityRandSeedLevel1, SecurityAccessMaskLevel_1);
 2223  5      
 2224  5                                              pMsgContext->resDataLen = 6u;
 2225  5                                              pMsgContext->reqData[2] = (INT8U)((descSendSecurityKeyLevel1 & 0xFF000000) >> 24u);
 2226  5                                              
 2227  5                                              pMsgContext->resData[3] = (INT8U)((descSendSecurityKeyLevel1 & 0x00FF0000) >> 16u);
 2228  5                                              pMsgContext->resData[4] = (INT8U)((descSendSecurityKeyLevel1 & 0x0000FF00) >> 8u);
 2229  5                                              pMsgContext->resData[5] = (INT8U)(descSendSecurityKeyLevel1 & 0x000000FF);
 2230  5                                              
 2231  5                                              descSecurityAccessRequestSeedLevelFlag_1 = FALSE;
 2232  5                                              
 2233  5                                              DescSetStateSecurityAccess(kDescStateSecurityAccessLevel_1);
 2234  5                                              
 2235  5                                              DescSetPosResponse(pMsgContext);                                
 2236  5                                      }
 2237  4                                      else
 2238  4                                      {
 2239  5                                              DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2240  5                                              
 2241  5                                              DescSetNegResponse(pMsgContext, kDescNrcRequestSequenceError);                          
 2242  5                                      }
 2243  4                              }
 2244  3                              else
 2245  3                              {
 2246  4                                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2247  4                                      
 2248  4                                      DescSetNegResponse(pMsgContext, kDescNrcTimeDelayNotExpired);                           
 2249  4                              }
 2250  3                      }
 2251  2                      else
 2252  2                      {
 2253  3                              DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2254  3      
 2255  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                          
 2256  3                      }
 2257  2              }
 2258  1              else
 2259  1              {
 2260  2                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2261  2      
 2262  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat); 
 2263  2              }
 2264  1      #else
                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
              
                      DescProcessingDone();
              #endif
 2269  1      }
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 38  

 2270         
 2271         /*  ********************************************************************************
 2272          * Function name:ApplDescOemGetLevel_2_RequestSeed (Service request header:$27 $09 )
 2273          * Description:Manages the security get seed function.
 2274          * Returns:  nothing
 2275          * Parameter(s):
 2276          *   - pMsgContext:
 2277          *       - Contains all request properties.
 2278          *       - Access type: read/write
 2279          * Particularitie(s) and limitation(s): none
 2280          ********************************************************************************  */
 2281         DESC_SERVICE_STAT void ApplDescOemGetLevel_2_RequestSeed(DescMsgContext* pMsgContext)
 2282         {
 2283  1      #if (kDescEnableService27_Level2 == 1)
 2284  1      
 2285  1              DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2286  1      
 2287  1              if (0x02 == pMsgContext->reqDataLen) 
 2288  1              {
 2289  2                      if (0u == VCU_VehicleSpeed)
 2290  2                      {
 2291  3                              /* When dalay timer active receive the request, send NRC */
 2292  3                              descSecurityRandSeedLevel2 = rand();
 2293  3                              
 2294  3                              if (1) // TODO:Delay timer arrive
 2295  3                              {
 2296  4                                      pMsgContext->resDataLen = 6u;
 2297  4                                      pMsgContext->reqData[2] = (INT8U)((descSecurityRandSeedLevel2 & 0xFF000000) >> 24u);
 2298  4      
 2299  4                                      pMsgContext->resData[3] = (INT8U)((descSecurityRandSeedLevel2 & 0x00FF0000) >> 16u);
 2300  4                                      pMsgContext->resData[4] = (INT8U)((descSecurityRandSeedLevel2 & 0x0000FF00) >> 8u);
 2301  4                                      pMsgContext->resData[5] = (INT8U)(descSecurityRandSeedLevel2 & 0x000000FF);
 2302  4      
 2303  4                                      descSecurityAccessRequestSeedLevelFlag_2 = TRUE;
 2304  4                                      
 2305  4                                      DescSetPosResponse(pMsgContext);
 2306  4                              }
 2307  3                              else
 2308  3                              {
 2309  4                                      descSecurityAccessRequestSeedLevelFlag_2 = FALSE;
 2310  4      
 2311  4                                      DescSetNegResponse(pMsgContext, kDescNrcTimeDelayNotExpired);                                   
 2312  4                              }
 2313  3                      }
 2314  2                      else
 2315  2                      {
 2316  3                              descSecurityAccessRequestSeedLevelFlag_2 = FALSE;
 2317  3      
 2318  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                  
 2319  3                      }
 2320  2              }
 2321  1              else
 2322  1              {
 2323  2                      descSecurityAccessRequestSeedLevelFlag_2 = FALSE;
 2324  2      
 2325  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2326  2              }
 2327  1      #else
                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
              
                      DescProcessingDone();
              #endif
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 39  

 2332  1      }
 2333         
 2334         /*  ********************************************************************************
 2335          * Function name:ApplDescOemSendLevel_2_SendKey (Service request header:$27 $0A )
 2336          * Description:Manages the security send key function.
 2337          * Returns:  nothing
 2338          * Parameter(s):
 2339          *   - pMsgContext:
 2340          *       - Contains all request properties.
 2341          *       - Access type: read/write
 2342          * Particularitie(s) and limitation(s): none
 2343          ********************************************************************************  */
 2344         DESC_SERVICE_STAT void ApplDescOemSendLevel_2_SendKey(DescMsgContext* pMsgContext)
 2345         {
 2346  1      #if (kDescEnableService27_Level2 == 1)
 2347  1      
 2348  1              if (0x04 == pMsgContext->reqDataLen) 
 2349  1              {
 2350  2                      if (0u == VCU_VehicleSpeed)
 2351  2                      {
 2352  3                              /* When dalay timer active receive the request, send NRC */
 2353  3                              if (1) // TODO:Delay timer arrive
 2354  3                              {
 2355  4                                      if (TRUE == descSecurityAccessRequestSeedLevelFlag_2)
 2356  4                                      {
 2357  5                                              descSendSecurityKeyLevel2 = seedToKey(descSecurityRandSeedLevel2, SecurityAccessMaskLevel_2);
 2358  5      
 2359  5                                              pMsgContext->resDataLen = 6u;
 2360  5                                              pMsgContext->reqData[2] = (INT8U)((descSendSecurityKeyLevel2 & 0xFF000000) >> 24u);
 2361  5                                              
 2362  5                                              pMsgContext->resData[3] = (INT8U)((descSendSecurityKeyLevel2 & 0x00FF0000) >> 16u);
 2363  5                                              pMsgContext->resData[4] = (INT8U)((descSendSecurityKeyLevel2 & 0x0000FF00) >> 8u);
 2364  5                                              pMsgContext->resData[5] = (INT8U)(descSendSecurityKeyLevel2 & 0x000000FF);
 2365  5                                              
 2366  5                                              descSecurityAccessRequestSeedLevelFlag_2 = FALSE;
 2367  5                                              
 2368  5                                              DescSetStateSecurityAccess(kDescStateSecurityAccessLevel_1);
 2369  5                                              
 2370  5                                              DescSetPosResponse(pMsgContext);                                
 2371  5                                      }
 2372  4                                      else
 2373  4                                      {
 2374  5                                              DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2375  5      
 2376  5                                              DescSetNegResponse(pMsgContext, kDescNrcRequestSequenceError);                                  
 2377  5                                      }
 2378  4      
 2379  4                              }
 2380  3                              else
 2381  3                              {
 2382  4                                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2383  4              
 2384  4                                      DescSetNegResponse(pMsgContext, kDescNrcTimeDelayNotExpired);                           
 2385  4                              }
 2386  3                      }
 2387  2                      else
 2388  2                      {
 2389  3                              DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2390  3      
 2391  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                  
 2392  3                      }
 2393  2              }
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 40  

 2394  1              else
 2395  1              {
 2396  2                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
 2397  2      
 2398  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2399  2              }
 2400  1      #else
                      DescSetStateSecurityAccess(kDescStateSecurityAccessLocked);
              
              #endif
 2404  1      }
 2405         
 2406         /*  ********************************************************************************
 2407          * Function name:ApplDescOemCommCtrlEnableRxEnableTx (Service request header:$28 $00 )
 2408          * Description: not available 
 2409          * Returns:  nothing
 2410          * Parameter(s):
 2411          *   - pMsgContext:
 2412          *       - Contains all request properties.
 2413          *       - Access type: read/write
 2414          * Particularitie(s) and limitation(s): none
 2415          ********************************************************************************  */
 2416         DESC_SERVICE_STAT void ApplDescOemCommCtrlEnableRxEnableTx(DescMsgContext* pMsgContext)
 2417         {
 2418  1      #if (kDescEnableService28_RxTxAllCtrl == 1)
 2419  1      
 2420  1              if (3u == pMsgContext->reqDataLen) 
 2421  1              {
 2422  2                      if (0u == VCU_VehicleSpeed)
 2423  2                      {
 2424  3                              switch (pMsgContext->reqData[2])
 2425  3                              {
 2426  4                                      case 0x01:
 2427  4                                              // normal communication messages
 2428  4                                              descApplFrameRxEnable = TRUE;
 2429  4                                              descApplFrameTxEnable = TRUE;
 2430  4      
 2431  4                                              pMsgContext->resDataLen = 3u;
 2432  4                                              DescSetPosResponse(pMsgContext);
 2433  4                                              break;
 2434  4      
 2435  4                                      case 0x02:
 2436  4                                              // network management communication messages
 2437  4                                              descNmFrameRxEnable = TRUE;
 2438  4                                              descNmFrameTxEnable = TRUE;
 2439  4      
 2440  4                                              pMsgContext->resDataLen = 3u;                                   
 2441  4                                              DescSetPosResponse(pMsgContext);                                
 2442  4                                              break;
 2443  4      
 2444  4                                      case 0x03:
 2445  4                                              // network management communication messages and normal communication messages
 2446  4                                              descNmFrameRxEnable = TRUE;
 2447  4                                              descNmFrameTxEnable = TRUE;
 2448  4      
 2449  4                                              descApplFrameRxEnable = TRUE;
 2450  4                                              descApplFrameTxEnable = TRUE;
 2451  4      
 2452  4                                              pMsgContext->resDataLen = 3u;
 2453  4                                              DescSetPosResponse(pMsgContext);                                
 2454  4                                              break;
 2455  4      
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 41  

 2456  4                                      default:
 2457  4                                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                                     
 2458  4                                              break;
 2459  4                              }
 2460  3                      }
 2461  2                      else
 2462  2                      {
 2463  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 2464  3                      }
 2465  2              }
 2466  1              else
 2467  1              {
 2468  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2469  2              }
 2470  1      #else
                      DescProcessingDone();
              #endif
 2473  1      }
 2474         
 2475         /*  ********************************************************************************
 2476          * Function name:ApplDescOemCommCtrlEnableRxDisableTx (Service request header:$28 $01 )
 2477          * Description: not available 
 2478          * Returns:  nothing
 2479          * Parameter(s):
 2480          *   - pMsgContext:
 2481          *       - Contains all request properties.
 2482          *       - Access type: read/write
 2483          * Particularitie(s) and limitation(s): none
 2484          ********************************************************************************  */
 2485         DESC_SERVICE_STAT void ApplDescOemCommCtrlEnableRxDisableTx(DescMsgContext* pMsgContext)
 2486         {
 2487  1      #if (kDescEnableService28_RxTxDivideCtrl == 1)
 2488  1      
 2489  1              if (3u == pMsgContext->reqDataLen) 
 2490  1              {
 2491  2                      if (0u == VCU_VehicleSpeed)
 2492  2                      {
 2493  3                              switch (pMsgContext->reqData[2])
 2494  3                              {
 2495  4                                      case 0x01:
 2496  4                                              // normal communication messages
 2497  4                                              descApplFrameRxEnable = TRUE;
 2498  4                                              descApplFrameTxEnable = FALSE;
 2499  4      
 2500  4                                              pMsgContext->resDataLen = 3u;
 2501  4                                              DescSetPosResponse(pMsgContext);
 2502  4                                              break;
 2503  4      
 2504  4                                      case 0x02:
 2505  4                                              // network management communication messages
 2506  4                                              descNmFrameRxEnable = TRUE;
 2507  4                                              descNmFrameTxEnable = FALSE;                                    
 2508  4      
 2509  4                                              pMsgContext->resDataLen = 3u;
 2510  4                                              DescSetPosResponse(pMsgContext);                                
 2511  4                                              break;
 2512  4      
 2513  4                                      case 0x03:
 2514  4                                              // network management communication messages and normal communication messages
 2515  4                                              descNmFrameRxEnable = TRUE;
 2516  4                                              descNmFrameTxEnable = FALSE;                                            
 2517  4                                              
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 42  

 2518  4                                              descApplFrameRxEnable = TRUE;
 2519  4                                              descApplFrameTxEnable = FALSE;
 2520  4      
 2521  4                                              pMsgContext->resDataLen = 3u;                                   
 2522  4                                              DescSetPosResponse(pMsgContext);                                
 2523  4                                              break;
 2524  4      
 2525  4                                      default:
 2526  4                                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                                             
 2527  4                                              break;
 2528  4                              }
 2529  3                      }
 2530  2                      else
 2531  2                      {
 2532  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 2533  3                      }
 2534  2              }
 2535  1              else
 2536  1              {
 2537  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat); 
 2538  2              }
 2539  1      #else
                      DescProcessingDone();
              #endif
 2542  1      }
 2543         
 2544         /*  ********************************************************************************
 2545          * Function name:ApplDescOemCommCtrlDisableRxEnableTx (Service request header:$28 $02 )
 2546          * Description: not available 
 2547          * Returns:  nothing
 2548          * Parameter(s):
 2549          *   - pMsgContext:
 2550          *       - Contains all request properties.
 2551          *       - Access type: read/write
 2552          * Particularitie(s) and limitation(s): none
 2553          ********************************************************************************  */
 2554         DESC_SERVICE_STAT void ApplDescOemCommCtrlDisableRxEnableTx(DescMsgContext* pMsgContext)
 2555         {
 2556  1      #if (kDescEnableService28_RxTxDivideCtrl == 1)
 2557  1      
 2558  1              if (3u == pMsgContext->reqDataLen) 
 2559  1              {
 2560  2                      if (0u == VCU_VehicleSpeed)
 2561  2                      {
 2562  3                              switch (pMsgContext->reqData[2])
 2563  3                              {
 2564  4                                      case 0x01:
 2565  4                                              // normal communication messages
 2566  4                                              descApplFrameRxEnable = FALSE;
 2567  4                                              descApplFrameTxEnable = TRUE;
 2568  4      
 2569  4                                              pMsgContext->resDataLen = 3u;
 2570  4                                              DescSetPosResponse(pMsgContext);                                        
 2571  4                                              break;
 2572  4      
 2573  4                                      case 0x02:
 2574  4                                              // network management communication messages
 2575  4                                              descNmFrameRxEnable = FALSE;
 2576  4                                              descNmFrameTxEnable = TRUE;
 2577  4      
 2578  4                                              pMsgContext->resDataLen = 3u;                                   
 2579  4                                              DescSetPosResponse(pMsgContext);                                
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 43  

 2580  4                                              break;
 2581  4      
 2582  4                                      case 0x03:
 2583  4                                              // network management communication messages and normal communication messages
 2584  4                                              descNmFrameRxEnable = FALSE;
 2585  4                                              descNmFrameTxEnable = TRUE;                                     
 2586  4      
 2587  4                                              descApplFrameRxEnable = FALSE;
 2588  4                                              descApplFrameTxEnable = TRUE;
 2589  4      
 2590  4                                              pMsgContext->resDataLen = 3u;
 2591  4                                              DescSetPosResponse(pMsgContext);                                        
 2592  4                                              break;
 2593  4      
 2594  4                                      default:
 2595  4                                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                                     
 2596  4                                              break;
 2597  4                              }
 2598  3                      }
 2599  2                      else
 2600  2                      {
 2601  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                  
 2602  3                      }
 2603  2              }
 2604  1              else
 2605  1              {
 2606  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2607  2              }
 2608  1      #else
                      DescProcessingDone();
              #endif
 2611  1      }
 2612         
 2613         /*  ********************************************************************************
 2614          * Function name:ApplDescOemCommCtrlDisableRxDisableTx (Service request header:$28 $03 )
 2615          * Description: not available 
 2616          * Returns:  nothing
 2617          * Parameter(s):
 2618          *   - pMsgContext:
 2619          *       - Contains all request properties.
 2620          *       - Access type: read/write
 2621          * Particularitie(s) and limitation(s): none
 2622          ********************************************************************************  */
 2623         DESC_SERVICE_STAT void ApplDescOemCommCtrlDisableRxDisableTx(DescMsgContext* pMsgContext)
 2624         {
 2625  1      #if (kDescEnableService28_RxTxAllCtrl == 1)
 2626  1      
 2627  1              if (3u == pMsgContext->reqDataLen) 
 2628  1              {
 2629  2                      if (0u == VCU_VehicleSpeed)
 2630  2                      {
 2631  3                              switch (pMsgContext->reqData[2])
 2632  3                              {
 2633  4                                      case 0x01:
 2634  4                                              // normal communication messages
 2635  4                                              descApplFrameRxEnable = FALSE;
 2636  4                                              descApplFrameTxEnable = FALSE;
 2637  4      
 2638  4                                              pMsgContext->resDataLen = 3u;
 2639  4                                              DescSetPosResponse(pMsgContext);                                        
 2640  4                                              break;
 2641  4      
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 44  

 2642  4                                      case 0x02:
 2643  4                                              // network management communication messages
 2644  4                                              descNmFrameRxEnable = FALSE;
 2645  4                                              descNmFrameTxEnable = FALSE;
 2646  4      
 2647  4                                              pMsgContext->resDataLen = 3u;                                   
 2648  4                                              DescSetPosResponse(pMsgContext);                                
 2649  4                                              break;
 2650  4      
 2651  4                                      case 0x03:
 2652  4                                              // network management communication messages and normal communication messages
 2653  4                                              descNmFrameRxEnable = FALSE;
 2654  4                                              descNmFrameTxEnable = FALSE;
 2655  4                                              
 2656  4                                              descApplFrameRxEnable = FALSE;
 2657  4                                              descApplFrameTxEnable = FALSE;
 2658  4      
 2659  4                                              pMsgContext->resDataLen = 3u;
 2660  4                                              DescSetPosResponse(pMsgContext);                                        
 2661  4                                              break;
 2662  4      
 2663  4                                      default:
 2664  4                                              DescSetNegResponse(pMsgContext, kDescNrcRequestOutOfRange);                                             
 2665  4                                              break;
 2666  4                              }
 2667  3                      }
 2668  2                      else
 2669  2                      {
 2670  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                                          
 2671  3                      }
 2672  2              }
 2673  1              else
 2674  1              {
 2675  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);         
 2676  2              }
 2677  1      #else
                      DescProcessingDone();
              #endif
 2680  1      }
 2681         
 2682         /*  ********************************************************************************
 2683          * Function name:ApplDesReadDataByPeriodicIndentifier_SendAtSlowRate (Service request header:$2A $01 )
 2684          * Description: not available 
 2685          * Returns:  nothing
 2686          * Parameter(s):
 2687          *   - pMsgContext:
 2688          *       - Contains all request properties.
 2689          *       - Access type: read/write
 2690          * Particularitie(s) and limitation(s): none
 2691          ********************************************************************************  */
 2692         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_SendAtSlowRate(DescMsgContext* pMsgContext)
 2693         {
 2694  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 2695  1              /* Dummy example how to access the request data. */
 2696  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 2697  1              DescClearResData(pMsgContext);
 2698  1              DescProcessingDone();   
 2699  1      }
 2700         
 2701         /*  ********************************************************************************
 2702          * Function name:ApplDesReadDataByPeriodicIndentifier_SendAtMediumRate (Service request header:$2A $02 )
 2703          * Description: not available 
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 45  

 2704          * Returns:  nothing
 2705          * Parameter(s):
 2706          *   - pMsgContext:
 2707          *       - Contains all request properties.
 2708          *       - Access type: read/write
 2709          * Particularitie(s) and limitation(s): none
 2710          ********************************************************************************  */
 2711         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_SendAtMediumRate(DescMsgContext* pMsgContext)
 2712         {
 2713  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 2714  1              /* Dummy example how to access the request data. */
 2715  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 2716  1              DescClearResData(pMsgContext);
 2717  1              DescProcessingDone();   
 2718  1      }
 2719         
 2720         /*  ********************************************************************************
 2721          * Function name:ApplDesReadDataByPeriodicIndentifier_SendAtFastRate (Service request header:$2A $03 )
 2722          * Description: not available 
 2723          * Returns:  nothing
 2724          * Parameter(s):
 2725          *   - pMsgContext:
 2726          *       - Contains all request properties.
 2727          *       - Access type: read/write
 2728          * Particularitie(s) and limitation(s): none
 2729          ********************************************************************************  */
 2730         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_SendAtFastRate(DescMsgContext* pMsgContext)
 2731         {
 2732  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 2733  1              /* Dummy example how to access the request data. */
 2734  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 2735  1              DescClearResData(pMsgContext);
 2736  1              DescProcessingDone();
 2737  1      }
 2738         
 2739         /*  ********************************************************************************
 2740          * Function name:ApplDesReadDataByPeriodicIndentifier_StopSending (Service request header:$2A $04 )
 2741          * Description: not available 
 2742          * Returns:  nothing
 2743          * Parameter(s):
 2744          *   - pMsgContext:
 2745          *       - Contains all request properties.
 2746          *       - Access type: read/write
 2747          * Particularitie(s) and limitation(s): none
 2748          ********************************************************************************  */
 2749         DESC_SERVICE_STAT void ApplDesReadDataByPeriodicIndentifier_StopSending(DescMsgContext* pMsgContext)
 2750         {
 2751  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 2752  1              /* Dummy example how to access the request data. */
 2753  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 2754  1              DescClearResData(pMsgContext);
 2755  1              DescProcessingDone();
 2756  1      }
 2757         
 2758         /*  ********************************************************************************
 2759          * Function name:ApplDescDynamicallyDefineDataIdentifier_DefineByIdentifier (Service request header:$2C $0
             -1 )
 2760          * Description: not available 
 2761          * Returns:  nothing
 2762          * Parameter(s):
 2763          *   - pMsgContext:
 2764          *       - Contains all request properties.
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 46  

 2765          *       - Access type: read/write
 2766          * Particularitie(s) and limitation(s): none
 2767          ********************************************************************************  */
 2768         DESC_SERVICE_STAT void ApplDescDynamicallyDefineDataIdentifier_DefineByIdentifier(DescMsgContext* pMsgCont
             -ext)
 2769         {
 2770  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 2771  1              /* Dummy example how to access the request data. */
 2772  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 2773  1              DescClearResData(pMsgContext);
 2774  1              DescProcessingDone();           
 2775  1      }
 2776         
 2777         /*  ********************************************************************************
 2778          * Function name:ApplDescDynamicallyDefineDataIdentifier_ClearDynamicallyDefineDataIdentifier (Service req
             -uest header:$2C $03 )
 2779          * Description: not available 
 2780          * Returns:  nothing
 2781          * Parameter(s):
 2782          *   - pMsgContext:
 2783          *       - Contains all request properties.
 2784          *       - Access type: read/write
 2785          * Particularitie(s) and limitation(s): none
 2786          ********************************************************************************  */
 2787         DESC_SERVICE_STAT void ApplDescDynamicallyDefineDataIdentifier_ClearDynamicallyDefineDataIdentifier(DescMs
             -gContext* pMsgContext)
 2788         {
 2789  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 2790  1              /* Dummy example how to access the request data. */
 2791  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 2792  1              DescClearResData(pMsgContext);
 2793  1              DescProcessingDone();           
 2794  1      }
 2795         
 2796         
 2797         /*  ********************************************************************************
 2798          * Function name:ApplDescWriteByDataIdentifier_ECU_SerialNumber (Service request header:$2E $F1 $8C )
 2799          * Description: not available 
 2800          * Returns:  nothing
 2801          * Parameter(s):
 2802          *   - pMsgContext->reqData:
 2803          *       - Points to the first service request data byte.
 2804          *       - Access type: read
 2805          *   - pMsgContext->resData:
 2806          *       - Points to the first writeable byte for the service response data.
 2807          *       - Access type: read/write
 2808          *   - pMsgContext->reqDataLen:
 2809          *       - Contains the count of the service request data bytes (Sid is excluded).
 2810          *       - Access type: read
 2811          *   - pMsgContext->resDataLen:
 2812          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 2813          *       - Access type: read/write
 2814          *   - pMsgContext->msgAddInfo.reqType:
 2815          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 2816          *       - Access type: read
 2817          *   - pMsgContext->msgAddInfo.resOnReq:
 2818          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 2819          *       - Access type: read/write
 2820          *   - pMsgContext->msgAddInfo.suppPosRes:
 2821          *       - UDS only!If set no positive response will be sent on this request.
 2822          *       - Access type: read
 2823          * Particularitie(s) and limitation(s):
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 47  

 2824          *   - The function "DescProcessingDone" must be called from now on (within this
 2825          * main-handler or later).
 2826          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 2827          * but before calling "DescProcessingDone".
 2828          ********************************************************************************  */
 2829         DESC_SERVICE_STAT void ApplDescWriteByDataIdentifier_ECU_SerialNumber(DescMsgContext* pMsgContext)
 2830         {
 2831  1              INT8U i = 0;
 2832  1              if (19u == pMsgContext->reqDataLen)
 2833  1              {
 2834  2                      if (0u == VCU_VehicleSpeed)
 2835  2                      {
 2836  3                              for(i = 0; i < ECU_SERIAL_NUM_LENGTH; i++)
 2837  3                              {
 2838  4                                      descDataIdentifier.systemSerialNumber[i] = pMsgContext->reqData[i + 3];
 2839  4                              }
 2840  3                              //descDataIdentifier.systemSerialNumber[16] = 0x01; //write flag
 2841  3      
 2842  3                              CopyString_v_g(descDataIdentifier.systemSerialNumber, ECU_SERIAL_NUM_ADDRESS, ECU_SERIAL_NUM_LENGTH, 1)
             -;
 2843  3                              
 2844  3                              pMsgContext->resDataLen = 0x03;
 2845  3                              DescSetPosResponse(pMsgContext);
 2846  3                      }
 2847  2                      else
 2848  2                      {
 2849  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 2850  3                      }
 2851  2              }
 2852  1              else
 2853  1              {
 2854  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 2855  2              }
 2856  1      }
 2857         
 2858         /*  ********************************************************************************
 2859          * Function name:ApplDescWriteByDataIdentifierOEM_VIN (Service request header:$2E $F1 $90 )
 2860          * Description: not available 
 2861          * Returns:  nothing
 2862          * Parameter(s):
 2863          *   - pMsgContext->reqData:
 2864          *       - Points to the first service request data byte.
 2865          *       - Access type: read
 2866          *   - pMsgContext->resData:
 2867          *       - Points to the first writeable byte for the service response data.
 2868          *       - Access type: read/write
 2869          *   - pMsgContext->reqDataLen:
 2870          *       - Contains the count of the service request data bytes (Sid is excluded).
 2871          *       - Access type: read
 2872          *   - pMsgContext->resDataLen:
 2873          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 2874          *       - Access type: read/write
 2875          *   - pMsgContext->msgAddInfo.reqType:
 2876          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 2877          *       - Access type: read
 2878          *   - pMsgContext->msgAddInfo.resOnReq:
 2879          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 2880          *       - Access type: read/write
 2881          *   - pMsgContext->msgAddInfo.suppPosRes:
 2882          *       - UDS only!If set no positive response will be sent on this request.
 2883          *       - Access type: read
 2884          * Particularitie(s) and limitation(s):
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 48  

 2885          *   - The function "DescProcessingDone" must be called from now on (within this
 2886          * main-handler or later).
 2887          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 2888          * but before calling "DescProcessingDone".
 2889          ********************************************************************************  */
 2890         DESC_SERVICE_STAT void ApplDescWriteByDataIdentifierOEM_VIN(DescMsgContext* pMsgContext)
 2891         {
 2892  1              INT8U i = 0;
 2893  1              if (20u == pMsgContext->reqDataLen)
 2894  1              {
 2895  2                      if (0u == VCU_VehicleSpeed)
 2896  2                      {
 2897  3                              for(i = 0; i < 17; i++)
 2898  3                              {
 2899  4                                      descDataIdentifier.OEM_VIN[i] = pMsgContext->reqData[i + 3];
 2900  4                              }
 2901  3                              descDataIdentifier.OEM_VIN[17] = 0x01; //write flag
 2902  3      
 2903  3                              CopyString_v_g(descDataIdentifier.OEM_VIN, VIN_VALUE_ADDRESS, VIN_VALUE_LENGTH, 1);
 2904  3                              
 2905  3                              pMsgContext->resDataLen = 0x03;
 2906  3                              DescSetPosResponse(pMsgContext);
 2907  3                      }
 2908  2                      else
 2909  2                      {
 2910  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
 2911  3                      }
 2912  2              }
 2913  1              else
 2914  1              {
 2915  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 2916  2              }
 2917  1      }
 2918         
 2919         
 2920         /*  ********************************************************************************
 2921          * Function name:ApplDescWriteEepromDataById_6668 (Service request header:$2E $66 $68 )
 2922          * Description: not available 
 2923          * Returns:  nothing
 2924          * Parameter(s):
 2925          *   - pMsgContext->reqData:
 2926          *       - Points to the first service request data byte.
 2927          *       - Access type: read
 2928          *   - pMsgContext->resData:
 2929          *       - Points to the first writeable byte for the service response data.
 2930          *       - Access type: read/write
 2931          *   - pMsgContext->reqDataLen:
 2932          *       - Contains the count of the service request data bytes (Sid is excluded).
 2933          *       - Access type: read
 2934          *   - pMsgContext->resDataLen:
 2935          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 2936          *       - Access type: read/write
 2937          *   - pMsgContext->msgAddInfo.reqType:
 2938          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 2939          *       - Access type: read
 2940          *   - pMsgContext->msgAddInfo.resOnReq:
 2941          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 2942          *       - Access type: read/write
 2943          *   - pMsgContext->msgAddInfo.suppPosRes:
 2944          *       - UDS only!If set no positive response will be sent on this request.
 2945          *       - Access type: read
 2946          * Particularitie(s) and limitation(s):
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 49  

 2947          *   - The function "DescProcessingDone" must be called from now on (within this
 2948          * main-handler or later).
 2949          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 2950          * but before calling "DescProcessingDone".
 2951          ********************************************************************************  */
 2952         DESC_SERVICE_STAT void ApplDescWriteEepromDataById_6668(DescMsgContext* pMsgContext)
 2953         {
 2954  1              INT8U i = 0;
 2955  1              INT32U writeDataAddress = 0;
 2956  1              INT16U writeDataLength = 0;
 2957  1              INT8U writeDataBuffer[50] = 0;
 2958  1              
 2959  1              if (7u == pMsgContext->reqDataLen)
 2960  1              {
 2961  2                      writeDataAddress = (INT32U)0xC40000 | ((INT32U)pMsgContext->reqData[3]) << 8 | (INT32U)pMsgContext->reqD
             -ata[4];
 2962  2                      writeDataLength = pMsgContext->reqData[5];
 2963  2                      for(i = 0; i < sizeof(writeDataBuffer); i++)
 2964  2                      {
 2965  3                              writeDataBuffer[i] = pMsgContext->reqData[6];
 2966  3                      }
 2967  2      
 2968  2                      CopyString_v_g(writeDataBuffer, writeDataAddress, writeDataLength, 1);
 2969  2                      pMsgContext->resDataLen = 3u;
 2970  2                      DescSetPosResponse(pMsgContext);
 2971  2              }
 2972  1              else
 2973  1              {
 2974  2              DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 2975  2              }
 2976  1      }
 2977         
 2978         
 2979         DESC_SERVICE_STAT void ApplDescWritePedalCylinderDataById_2201(DescMsgContext* pMsgContext)
 2980         {
 2981  1              if (19u == pMsgContext->reqDataLen)
 2982  1              {
 2983  2                      gRTE_pedalInitValue[0] = ((INT16U)pMsgContext->reqData[3]) << 8 | (INT16U)pMsgContext->reqData[4];
 2984  2                      gRTE_pedalInitValue[1] = ((INT16U)pMsgContext->reqData[5]) << 8 | (INT16U)pMsgContext->reqData[6];
 2985  2                      gRTE_cylinderInitValue[0] = ((INT16U)pMsgContext->reqData[11]) << 8 | (INT16U)pMsgContext->reqData[12];
 2986  2                      gRTE_cylinderInitValue[1] = ((INT16U)pMsgContext->reqData[13]) << 8 | (INT16U)pMsgContext->reqData[14];
 2987  2      
 2988  2                      pMsgContext->resDataLen = 3u;
 2989  2                      DescSetPosResponse(pMsgContext);
 2990  2              }
 2991  1              else
 2992  1              {
 2993  2              DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 2994  2              }
 2995  1      }
 2996         
 2997         DESC_SERVICE_STAT void ApplDescWriteLongTimeBrakeTimesDataById_2202(DescMsgContext* pMsgContext)
 2998         {
 2999  1              if (7u == pMsgContext->reqDataLen)
 3000  1              {
 3001  2                      g_longTimeBrakeCnt = (pMsgContext->reqData[3] << 24)
 3002  2                                                              || (pMsgContext->reqData[4] << 16)
 3003  2                                                              || (pMsgContext->reqData[5] << 8)
 3004  2                                                              ||  pMsgContext->reqData[6] ;
 3005  2                      CopyString_v_g(&g_longTimeBrakeCnt, LONG_TIME_BRAKE_ADDRESS, LONG_TIME_BRAKE_LENGTH, 1);
 3006  2                      
 3007  2                      pMsgContext->resDataLen = 3u;
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 50  

 3008  2                      DescSetPosResponse(pMsgContext);
 3009  2              }
 3010  1              else
 3011  1              {
 3012  2              DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 3013  2              }
 3014  1      }
 3015         
 3016         
 3017         
 3018         DESC_SERVICE_STAT void ApplDescWritePvTestFlagById_2E02(DescMsgContext* pMsgContext)
 3019         {
 3020  1              if (4u == pMsgContext->reqDataLen)
 3021  1              {
 3022  2                      if(0x01 == pMsgContext->reqData[3])
 3023  2                      {
 3024  3                              g_pvTestFlag = TRUE;
 3025  3                      }
 3026  2                      else
 3027  2                      {
 3028  3                              g_pvTestFlag = FALSE;
 3029  3                      }       
 3030  2                      
 3031  2                      pMsgContext->resDataLen = 3u;
 3032  2                      DescSetPosResponse(pMsgContext);
 3033  2              }
 3034  1              else
 3035  1              {
 3036  2              DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 3037  2              }
 3038  1      }
 3039         
 3040         DESC_SERVICE_STAT void ApplDescWriteClearCalibrationDataById_2203(DescMsgContext* pMsgContext)
 3041         {
 3042  1              INT8U tempBuffer[230] = {0};
 3043  1              
 3044  1              if (5u == pMsgContext->reqDataLen)
 3045  1              {
 3046  2                      if((0x55 == pMsgContext->reqData[3]) && (0xCC == pMsgContext->reqData[4]))
 3047  2                      {
 3048  3                              
 3049  3                              //clear PID para
 3050  3                              CopyString_v_g(tempBuffer, LOCATION_LOOP_KP_ADDRESS, 48, 1); //12 * 4
 3051  3                              
 3052  3                              //clear booster para
 3053  3                              CopyString_v_g(tempBuffer, PEDAL_TO_CYLINDER_ADDRESS, 224, 1); //14 * 16
 3054  3                              
 3055  3                              //clear wireControl para
 3056  3                              CopyString_v_g(tempBuffer, PRESSURE_TO_CYLINDER_ADDRESS, 192, 1); //12 * 16
 3057  3                              
 3058  3                              //clear protect para
 3059  3                              CopyString_v_g(tempBuffer, PWM_PROTECT_FAULT_VALUE_ADDRESS, 20, 1);
 3060  3                              
 3061  3                              //reset
 3062  3                              ser11_reset = TRUE;
 3063  3                              
 3064  3                              pMsgContext->resDataLen = 3u;
 3065  3                              DescSetPosResponse(pMsgContext);
 3066  3                      }
 3067  2                      else
 3068  2                      {
 3069  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 51  

 3070  3                      }       
 3071  2              }
 3072  1              else
 3073  1              {
 3074  2              DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);
 3075  2              }
 3076  1      }
 3077         
 3078         
 3079         /*  ********************************************************************************
 3080          * Function name:ApplDescRoutineControlByIdentifier_CheckProgrammingIntegrity (Service request header:$31 
             -$01 $F0 $01 )
 3081          * Description: not available 
 3082          * Returns:  nothing
 3083          * Parameter(s):
 3084          *   - pMsgContext->reqData:
 3085          *       - Points to the first service request data byte.
 3086          *       - Access type: read
 3087          *   - pMsgContext->resData:
 3088          *       - Points to the first writeable byte for the service response data.
 3089          *       - Access type: read/write
 3090          *   - pMsgContext->reqDataLen:
 3091          *       - Contains the count of the service request data bytes (Sid is excluded).
 3092          *       - Access type: read
 3093          *   - pMsgContext->resDataLen:
 3094          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 3095          *       - Access type: read/write
 3096          *   - pMsgContext->msgAddInfo.reqType:
 3097          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3098          *       - Access type: read
 3099          *   - pMsgContext->msgAddInfo.resOnReq:
 3100          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3101          *       - Access type: read/write
 3102          *   - pMsgContext->msgAddInfo.suppPosRes:
 3103          *       - UDS only!If set no positive response will be sent on this request.
 3104          *       - Access type: read
 3105          * Particularitie(s) and limitation(s):
 3106          *   - The function "DescProcessingDone" must be called from now on (within this
 3107          * main-handler or later).
 3108          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3109          * but before calling "DescProcessingDone".
 3110          ********************************************************************************  */
 3111         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_CheckProgrammingIntegrity(DescMsgContext* pMsgCo
             -ntext)
 3112         {
 3113  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3114  1              /* Dummy example how to access the request data. */
 3115  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */ 
 3116  1      
 3117  1              /* Function implementation in bootloader */
 3118  1              DescClearResData(pMsgContext);
 3119  1              DescProcessingDone();
 3120  1      }
 3121         
 3122         /*  ********************************************************************************
 3123          * Function name:ApplDescRoutineControlByIdentifier_CheckProgrammingPreCondition (Service request header:$
             -31 $01 $FF $02 )
 3124          * Description: not available 
 3125          * Returns:  nothing
 3126          * Parameter(s):
 3127          *   - pMsgContext->reqData:
 3128          *       - Points to the first service request data byte.
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 52  

 3129          *       - Access type: read
 3130          *   - pMsgContext->resData:
 3131          *       - Points to the first writeable byte for the service response data.
 3132          *       - Access type: read/write
 3133          *   - pMsgContext->reqDataLen:
 3134          *       - Contains the count of the service request data bytes (Sid is excluded).
 3135          *       - Access type: read
 3136          *   - pMsgContext->resDataLen:
 3137          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 3138          *       - Access type: read/write
 3139          *   - pMsgContext->msgAddInfo.reqType:
 3140          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3141          *       - Access type: read
 3142          *   - pMsgContext->msgAddInfo.resOnReq:
 3143          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3144          *       - Access type: read/write
 3145          *   - pMsgContext->msgAddInfo.suppPosRes:
 3146          *       - UDS only!If set no positive response will be sent on this request.
 3147          *       - Access type: read
 3148          * Particularitie(s) and limitation(s):
 3149          *   - The function "DescProcessingDone" must be called from now on (within this
 3150          * main-handler or later).
 3151          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3152          * but before calling "DescProcessingDone".
 3153          ********************************************************************************  */
 3154         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_CheckProgrammingPreCondition(DescMsgContext* pMs
             -gContext)
 3155         {
 3156  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3157  1              /* Dummy example how to access the request data. */
 3158  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */ 
 3159  1              DescClearResData(pMsgContext);
 3160  1      
 3161  1              /* Check programming condition, if programming condition is OK,
 3162  1               * the routine status record is correctResult(0x00), else
 3163  1               * is incorrectResult(0x01). */
 3164  1              if (0u == VCU_VehicleSpeed)
 3165  1              {
 3166  2                      pMsgContext->resData[4] = 0x00;
 3167  2              }
 3168  1              else
 3169  1              {
 3170  2                      pMsgContext->resData[4] = 0x01;
 3171  2              }
 3172  1      
 3173  1              pMsgContext->resData[3] = pMsgContext->reqData[3];
 3174  1              
 3175  1              pMsgContext->resDataLen = 0x05;
 3176  1              DescSetPosResponse(pMsgContext);
 3177  1      }
 3178         
 3179         /*  ********************************************************************************
 3180          * Function name:ApplDescRoutineControlByIdentifier_EraseMemory (Service request header:$31 $01 $FF $00 )
 3181          * Description: not available 
 3182          * Returns:  nothing
 3183          * Parameter(s):
 3184          *   - pMsgContext->reqData:
 3185          *       - Points to the first service request data byte.
 3186          *       - Access type: read
 3187          *   - pMsgContext->resData:
 3188          *       - Points to the first writeable byte for the service response data.
 3189          *       - Access type: read/write
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 53  

 3190          *   - pMsgContext->reqDataLen:
 3191          *       - Contains the count of the service request data bytes (Sid is excluded).
 3192          *       - Access type: read
 3193          *   - pMsgContext->resDataLen:
 3194          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 3195          *       - Access type: read/write
 3196          *   - pMsgContext->msgAddInfo.reqType:
 3197          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3198          *       - Access type: read
 3199          *   - pMsgContext->msgAddInfo.resOnReq:
 3200          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3201          *       - Access type: read/write
 3202          *   - pMsgContext->msgAddInfo.suppPosRes:
 3203          *       - UDS only!If set no positive response will be sent on this request.
 3204          *       - Access type: read
 3205          * Particularitie(s) and limitation(s):
 3206          *   - The function "DescProcessingDone" must be called from now on (within this
 3207          * main-handler or later).
 3208          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3209          * but before calling "DescProcessingDone".
 3210          ********************************************************************************  */
 3211         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_EraseMemory(DescMsgContext* pMsgContext)
 3212         {
 3213  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3214  1              /* Dummy example how to access the request data. */
 3215  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 3216  1      
 3217  1              /* Function implementation in bootloader */
 3218  1              DescClearResData(pMsgContext);
 3219  1              DescProcessingDone();
 3220  1      }
 3221         
 3222         /*  ********************************************************************************
 3223          * Function name:ApplDescRoutineControlByIdentifier_CheckProgrammingDependency (Service request header:$31
             - $01 $FF $01 )
 3224          * Description: not available 
 3225          * Returns:  nothing
 3226          * Parameter(s):
 3227          *   - pMsgContext->reqData:
 3228          *       - Points to the first service request data byte.
 3229          *       - Access type: read
 3230          *   - pMsgContext->resData:
 3231          *       - Points to the first writeable byte for the service response data.
 3232          *       - Access type: read/write
 3233          *   - pMsgContext->reqDataLen:
 3234          *       - Contains the count of the service request data bytes (Sid is excluded).
 3235          *       - Access type: read
 3236          *   - pMsgContext->resDataLen:
 3237          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 3238          *       - Access type: read/write
 3239          *   - pMsgContext->msgAddInfo.reqType:
 3240          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3241          *       - Access type: read
 3242          *   - pMsgContext->msgAddInfo.resOnReq:
 3243          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3244          *       - Access type: read/write
 3245          *   - pMsgContext->msgAddInfo.suppPosRes:
 3246          *       - UDS only!If set no positive response will be sent on this request.
 3247          *       - Access type: read
 3248          * Particularitie(s) and limitation(s):
 3249          *   - The function "DescProcessingDone" must be called from now on (within this
 3250          * main-handler or later).
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 54  

 3251          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3252          * but before calling "DescProcessingDone".
 3253          ********************************************************************************  */
 3254         DESC_SERVICE_STAT void ApplDescRoutineControlByIdentifier_CheckProgrammingDependency(DescMsgContext* pMsgC
             -ontext)
 3255         {
 3256  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3257  1              /* Dummy example how to access the request data. */
 3258  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 3259  1      
 3260  1              /* Function implementation in bootloader */
 3261  1              DescClearResData(pMsgContext);
 3262  1              DescProcessingDone();
 3263  1      }
 3264         
 3265         /*  ********************************************************************************
 3266          * Function name:ApplDescRequestDownload (Service request header:$34 )
 3267          * Description: not available 
 3268          * Returns:  nothing
 3269          * Parameter(s):
 3270          *   - pMsgContext->reqData:
 3271          *       - Points to the first service request byte after the Sid.
 3272          *       - Access type: read
 3273          *   - pMsgContext->resData:
 3274          *       - Points to the first writeable byte for the service response after the Sid.
 3275          *       - Access type: read/write
 3276          *   - pMsgContext->reqDataLen:
 3277          *       - Contains the service request length, excluding Sid byte only.
 3278          *       - Access type: read
 3279          *   - pMsgContext->resDataLen:
 3280          *       - Must be initialized with the total service response length, excluding the Sid only.
 3281          *       - Access type: read/write
 3282          *   - pMsgContext->msgAddInfo.reqType:
 3283          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3284          *       - Access type: read
 3285          *   - pMsgContext->msgAddInfo.resOnReq:
 3286          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3287          *       - Access type: read/write
 3288          *   - pMsgContext->msgAddInfo.suppPosRes:
 3289          *       - UDS only!If set no positive response will be sent on this request.
 3290          *       - Access type: read
 3291          * Particularitie(s) and limitation(s):
 3292          *   - The function "DescProcessingDone" must be called from now on (within this
 3293          * main-handler or later).
 3294          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3295          * but before calling "DescProcessingDone".
 3296          ********************************************************************************  */
 3297         DESC_SERVICE_STAT void ApplDescRequestDownload(DescMsgContext* pMsgContext)
 3298         {
 3299  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3300  1              /* Dummy example how to access the request data. */
 3301  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 3302  1              DescClearResData(pMsgContext);
 3303  1              DescProcessingDone();
 3304  1      }
 3305         
 3306         /*  ********************************************************************************
 3307          * Function name:ApplDescTransferData (Service request header:$36 )
 3308          * Description: not available 
 3309          * Returns:  nothing
 3310          * Parameter(s):
 3311          *   - pMsgContext->reqData:
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 55  

 3312          *       - Points to the first service request byte after the Sid.
 3313          *       - Access type: read
 3314          *   - pMsgContext->resData:
 3315          *       - Points to the first writeable byte for the service response after the Sid.
 3316          *       - Access type: read/write
 3317          *   - pMsgContext->reqDataLen:
 3318          *       - Contains the service request length, excluding Sid byte only.
 3319          *       - Access type: read
 3320          *   - pMsgContext->resDataLen:
 3321          *       - Must be initialized with the total service response length, excluding the Sid only.
 3322          *       - Access type: read/write
 3323          *   - pMsgContext->msgAddInfo.reqType:
 3324          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3325          *       - Access type: read
 3326          *   - pMsgContext->msgAddInfo.resOnReq:
 3327          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3328          *       - Access type: read/write
 3329          *   - pMsgContext->msgAddInfo.suppPosRes:
 3330          *       - UDS only!If set no positive response will be sent on this request.
 3331          *       - Access type: read
 3332          * Particularitie(s) and limitation(s):
 3333          *   - The function "DescProcessingDone" must be called from now on (within this
 3334          * main-handler or later).
 3335          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3336          * but before calling "DescProcessingDone".
 3337          ********************************************************************************  */
 3338         DESC_SERVICE_STAT void ApplDescTransferData(DescMsgContext* pMsgContext)
 3339         {
 3340  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3341  1              /* Dummy example how to access the request data. */
 3342  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 3343  1              DescClearResData(pMsgContext);
 3344  1              DescProcessingDone();
 3345  1      }
 3346         
 3347         /*  ********************************************************************************
 3348          * Function name:ApplDescRequestTransferExit (Service request header:$37 )
 3349          * Description: not available 
 3350          * Returns:  nothing
 3351          * Parameter(s):
 3352          *   - pMsgContext->reqData:
 3353          *       - Points to the first service request byte after the Sid.
 3354          *       - Access type: read
 3355          *   - pMsgContext->resData:
 3356          *       - Points to the first writeable byte for the service response after the Sid.
 3357          *       - Access type: read/write
 3358          *   - pMsgContext->reqDataLen:
 3359          *       - Contains the service request length, excluding Sid byte only.
 3360          *       - Access type: read
 3361          *   - pMsgContext->resDataLen:
 3362          *       - Must be initialized with the total service response length, excluding the Sid only.
 3363          *       - Access type: read/write
 3364          *   - pMsgContext->msgAddInfo.reqType:
 3365          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3366          *       - Access type: read
 3367          *   - pMsgContext->msgAddInfo.resOnReq:
 3368          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3369          *       - Access type: read/write
 3370          *   - pMsgContext->msgAddInfo.suppPosRes:
 3371          *       - UDS only!If set no positive response will be sent on this request.
 3372          *       - Access type: read
 3373          * Particularitie(s) and limitation(s):
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 56  

 3374          *   - The function "DescProcessingDone" must be called from now on (within this
 3375          * main-handler or later).
 3376          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3377          * but before calling "DescProcessingDone".
 3378          ********************************************************************************  */
 3379         DESC_SERVICE_STAT void ApplDescRequestTransferExit(DescMsgContext* pMsgContext)
 3380         {
 3381  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3382  1              /* Dummy example how to access the request data. */
 3383  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 3384  1              DescClearResData(pMsgContext);
 3385  1              DescProcessingDone();
 3386  1      }
 3387         
 3388         /***********************************************************************
 3389         *  Name        : ApplDescWriteMemoryByAddress
 3390         *  Description : Service request header:$3D         
 3391         *  Parameter   : pMsgContext
 3392         *  Returns     : none 
 3393         ***********************************************************************/
 3394         DESC_SERVICE_STAT void ApplDescWriteMemoryByAddress(DescMsgContext* pMsgContext)
 3395         {
 3396  1              /* <<TBD>> Remove this comment once you have completely implemented this function!!! */
 3397  1              /* Dummy example how to access the request data. */
 3398  1              /* Assumming the FIRST DATA byte contains important data which has to be less than a constant value. */
 3399  1              DescClearResData(pMsgContext);
 3400  1              DescProcessingDone();           
 3401  1      }
 3402         
 3403         /***********************************************************************
 3404         *  Name        : ApplDescOemProcessTesterPresent
 3405         *  Description : Service request header:$3E         
 3406         *  Parameter   : pMsgContext
 3407         *  Returns     : none 
 3408         ***********************************************************************/
 3409         DESC_SERVICE_STAT void ApplDescOemProcessTesterPresent(DescMsgContext* pMsgContext)
 3410         {
 3411  1              DescClearResData(pMsgContext);
 3412  1      
 3413  1              if (2u == pMsgContext->reqDataLen) 
 3414  1              {
 3415  2                      if (0x00 == pMsgContext->reqData[1])
 3416  2                      {
 3417  3                              descOemProcessTesterPresentFlag = TRUE;
 3418  3                              descOemProcessTesterPresentTimeoutCnt = 0u;
 3419  3      
 3420  3                              pMsgContext->resDataLen = 0x02;
 3421  3                              DescSetPosResponse(pMsgContext);
 3422  3                      }
 3423  2                      else if (0x80 == pMsgContext->reqData[1])
 3424  2                      {
 3425  3                              descOemProcessTesterPresentFlag = TRUE;
 3426  3                              descOemProcessTesterPresentTimeoutCnt = 0u;
 3427  3      
 3428  3                              /* 0x80 not need to response */
 3429  3      
 3430  3                      }
 3431  2                      else
 3432  2                      {
 3433  3                              DescSetNegResponse(pMsgContext, kDescNrcSubfunctionNotSupported);                               
 3434  3                      }
 3435  2              }
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 57  

 3436  1              else
 3437  1              {
 3438  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);                 
 3439  2              }
 3440  1      }
 3441         
 3442         /*  ********************************************************************************
 3443          * Function name:ApplDescControlDtcSettingEnable (Service request header:$85 $1 )
 3444          * Description: not available 
 3445          * Returns:  nothing
 3446          * Parameter(s):
 3447          *   - pMsgContext->reqData:
 3448          *       - Points to the first service request data byte.
 3449          *       - Access type: read
 3450          *   - pMsgContext->resData:
 3451          *       - Points to the first writeable byte for the service response data.
 3452          *       - Access type: read/write
 3453          *   - pMsgContext->reqDataLen:
 3454          *       - Contains the count of the service request data bytes (Sid is excluded).
 3455          *       - Access type: read
 3456          *   - pMsgContext->resDataLen:
 3457          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 3458          *       - Access type: read/write
 3459          *   - pMsgContext->msgAddInfo.reqType:
 3460          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3461          *       - Access type: read
 3462          *   - pMsgContext->msgAddInfo.resOnReq:
 3463          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3464          *       - Access type: read/write
 3465          *   - pMsgContext->msgAddInfo.suppPosRes:
 3466          *       - UDS only!If set no positive response will be sent on this request.
 3467          *       - Access type: read
 3468          * Particularitie(s) and limitation(s):
 3469          *   - The function "DescProcessingDone" must be called from now on (within this
 3470          * main-handler or later).
 3471          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3472          * but before calling "DescProcessingDone".
 3473          ********************************************************************************  */
 3474         DESC_SERVICE_STAT void ApplDescControlDtcSettingEnable(DescMsgContext* pMsgContext)
 3475         {
 3476  1      
 3477  1              if (2u == pMsgContext->reqDataLen)
 3478  1              {
 3479  2                      if (0u == VCU_VehicleSpeed)
 3480  2                      {
 3481  3                              DescMgr_CanDiagDtcControlSettingOn();   
 3482  3              
 3483  3                              pMsgContext->resDataLen = 0x02;
 3484  3                              DescSetPosResponse(pMsgContext);
 3485  3                      }
 3486  2                      else
 3487  2                      {
 3488  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);          
 3489  3                      }
 3490  2              }
 3491  1              else
 3492  1              {
 3493  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);                 
 3494  2              }
 3495  1      }
 3496         
 3497         /*  ********************************************************************************
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 58  

 3498          * Function name:ApplDescControlDtcSettingDisable (Service request header:$85 $2 )
 3499          * Description: not available 
 3500          * Returns:  nothing
 3501          * Parameter(s):
 3502          *   - pMsgContext->reqData:
 3503          *       - Points to the first service request data byte.
 3504          *       - Access type: read
 3505          *   - pMsgContext->resData:
 3506          *       - Points to the first writeable byte for the service response data.
 3507          *       - Access type: read/write
 3508          *   - pMsgContext->reqDataLen:
 3509          *       - Contains the count of the service request data bytes (Sid is excluded).
 3510          *       - Access type: read
 3511          *   - pMsgContext->resDataLen:
 3512          *       - Must be initialized with the count of the service response data bytes (Sid is excluded).
 3513          *       - Access type: read/write
 3514          *   - pMsgContext->msgAddInfo.reqType:
 3515          *       - Shows the addressing type of the request (kDescPhysReq or kDescFuncReq).
 3516          *       - Access type: read
 3517          *   - pMsgContext->msgAddInfo.resOnReq:
 3518          *       - Indicates if there will be response. Allowed only to write only 0 !!!
 3519          *       - Access type: read/write
 3520          *   - pMsgContext->msgAddInfo.suppPosRes:
 3521          *       - UDS only!If set no positive response will be sent on this request.
 3522          *       - Access type: read
 3523          * Particularitie(s) and limitation(s):
 3524          *   - The function "DescProcessingDone" must be called from now on (within this
 3525          * main-handler or later).
 3526          *   - The function "DescSetNegResponse" can be called within this main-handler or later
 3527          * but before calling "DescProcessingDone".
 3528          ********************************************************************************  */
 3529         DESC_SERVICE_STAT void ApplDescControlDtcSettingDisable(DescMsgContext* pMsgContext)
 3530         {
 3531  1      
 3532  1              if (2u == pMsgContext->reqDataLen)
 3533  1              {
 3534  2                      if (0u == VCU_VehicleSpeed)
 3535  2                      {
 3536  3                              DescMgr_CanDiagDtcControlSettingOff();  
 3537  3      
 3538  3                              pMsgContext->resDataLen = 0x02;
 3539  3                              DescSetPosResponse(pMsgContext);
 3540  3                      }
 3541  2                      else
 3542  2                      {
 3543  3                              DescSetNegResponse(pMsgContext, kDescNrcConditionsNotCorrect);                  
 3544  3                      }
 3545  2              }
 3546  1              else
 3547  1              {
 3548  2                      DescSetNegResponse(pMsgContext, kDescNrcInvalidFormat);                 
 3549  2              }
 3550  1      }
 3551         
 3552         /***********************************************************************
 3553         *  Name        : CanDiagAppCallBack
 3554         *  Description : call back all service rountine         
 3555         *  Parameter   : pMsgContext
 3556         *  Returns     : none 
 3557         ***********************************************************************/
 3558         void CanDiagAppCallBack(APPL_DESC_SERVICE_ID_TYPE MsgContextId, DescMsgContext* pMsgContext)
 3559         {
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 59  

 3560  1              DescClearResData(pMsgContext);
 3561  1      
 3562  1          if (MsgContextId < DESC_MAX_TYPE)
 3563  1          {
 3564  2              if (CanDiagHandler[MsgContextId] != NULL)
 3565  2              {   
 3566  3                  CanDiagHandler[MsgContextId](pMsgContext);
 3567  3              }        
 3568  2          }
 3569  1      }
 3570         
 3571         /***********************************************************************
 3572         *  Name        : DescClearResData
 3573         *  Description : none        
 3574         *  Parameter   : pMsgContext
 3575         *  Returns     : none 
 3576         ***********************************************************************/
 3577         void DescClearResData(DescMsgContext* pMsgContext)
 3578         {
 3579  1              INT16U i;
 3580  1      
 3581  1              for (i = 0u; i < pMsgContext->resDataLen; i++)
 3582  1              {
 3583  2                      pMsgContext->resData[i] = 0u;
 3584  2              }       
 3585  1      }
 3586         
 3587         /***********************************************************************
 3588         *  Name        : DescSetNegResponse
 3589         *  Description : none        
 3590         *  Parameter   : pMsgContext
 3591         *  Returns     : none 
 3592         ***********************************************************************/
 3593         void DescSetNegResponse(DescMsgContext* pMsgContext, DescNegResCode errorCode)
 3594         {
 3595  1              pMsgContext->resDataLen = 0x03;
 3596  1              pMsgContext->resData[0] = 0x7F;
 3597  1              pMsgContext->resData[1] = pMsgContext->reqData[0];
 3598  1              pMsgContext->resData[2] = errorCode;
 3599  1              pMsgContext->resData[3] = 0x00;
 3600  1              pMsgContext->resData[4] = 0x00;
 3601  1              pMsgContext->resData[5] = 0x00;
 3602  1              pMsgContext->resData[6] = 0x00;
 3603  1      
 3604  1              CanTx_descResMsgSendEnable();
 3605  1      }
 3606         
 3607         /***********************************************************************
 3608         *  Name        : DescSetPosResponse
 3609         *  Description : none        
 3610         *  Parameter   : pMsgContext
 3611         *  Returns     : none 
 3612         ***********************************************************************/
 3613         void DescSetPosResponse(DescMsgContext* pMsgContext)
 3614         {
 3615  1              pMsgContext->resData[0] = pMsgContext->reqData[0] + 0x40;
 3616  1              pMsgContext->resData[1] = pMsgContext->reqData[1];
 3617  1              pMsgContext->resData[2] = pMsgContext->reqData[2];
 3618  1      
 3619  1              CanTx_descResMsgSendEnable();
 3620  1      }
 3621         
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 60  

 3622         /***********************************************************************
 3623         *  Name        : DescProcessingDone
 3624         *  Description : none        
 3625         *  Parameter   : pMsgContext
 3626         *  Returns     : none 
 3627         ***********************************************************************/
 3628         void DescProcessingDone(void)
 3629         {
 3630  1              g_descReqMsgRxFlag = FALSE;             
 3631  1      }
 3632         
 3633         /***********************************************************************
 3634         *  Name        : seedToKey
 3635         *  Description : none        
 3636         *  Parameter   : pMsgContext
 3637         *  Returns     : none 
 3638         ***********************************************************************/
 3639         DESC_SERVICE_STAT INT32U seedToKey(INT32U seed, INT32U mask)
 3640         {
 3641  1              INT8U i;
 3642  1              INT32U key = 0u;
 3643  1      
 3644  1              if (seed != 0u)
 3645  1              {
 3646  2                      for (i=0u; i<35u; i++)
 3647  2                      {
 3648  3                              if (seed & 0x80000000)
 3649  3                              {
 3650  4                                      seed = seed << 1u;
 3651  4                                      seed = seed ^ mask;
 3652  4                              }
 3653  3                              else
 3654  3                              {
 3655  4                                      seed = seed << 1u;
 3656  4                              }
 3657  3                      }
 3658  2              }
 3659  1              else
 3660  1              {
 3661  2                      key = seed;
 3662  2              }
 3663  1      
 3664  1              return key;
 3665  1      }
 3666         
 3667         /* _END_OF_DESC_SERVICE_ */
 3668         


MODULE INFORMATION:   INITIALIZED  UNINITIALIZED
  CODE SIZE        =       11648     --------
  NEAR-CONST SIZE  =          28     --------
  FAR-CONST SIZE   =         618     --------
  HUGE-CONST SIZE  =    --------     --------
  XHUGE-CONST SIZE =    --------     --------
  NEAR-DATA SIZE   =          34     --------
  FAR-DATA SIZE    =        1010     --------
  XHUGE-DATA SIZE  =    --------     --------
  IDATA-DATA SIZE  =    --------     --------
  SDATA-DATA SIZE  =    --------     --------
  BDATA-DATA SIZE  =    --------     --------
  HUGE-DATA SIZE   =    --------     --------
C166 COMPILER V7.57.0, DESC_SER                                                            12/25/2020 20:36:17 PAGE 61  

  BIT SIZE         =    --------     --------
  INIT'L SIZE      =        1176     --------
END OF MODULE INFORMATION.


C166 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
